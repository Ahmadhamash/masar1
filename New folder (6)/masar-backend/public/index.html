
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مسار | ارسم مستقبلك بوضوح</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root {
            --primary-dark: #1e1b4b;
            --primary: #4f46e5;
            --primary-light: #c7d2fe;
            --secondary: #6ee7b7;
            --background: #f8fafc;
            --dark-bg: #0f172a;
            --text-dark: #1e293b;
            --text-light: #64748b;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--background);
            color: var(--text-dark);
        }

        /* Holland Assessment Page Styles */
        .holland-assessment-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f8fafc, #e0e7ff);
            z-index: 1001;
            overflow-y: auto;
        }
        
        .holland-assessment-page.active {
            display: block;
        }
        
        .holland-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .holland-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .holland-progress {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 2rem;
        }
        
        .holland-progress-fill {
            height: 100%;
            background: linear-gradient(135deg, var(--primary), #6366f1);
            transition: width 0.3s ease;
            border-radius: 4px;
        }
        
        .holland-question-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .holland-question {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .holland-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        
        .holland-option {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
        }
        
        .holland-option:hover {
            border-color: var(--primary);
            background: #eef2ff;
        }
        
        .holland-option.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, #eef2ff, #e0e7ff);
            color: var(--primary);
        }
        
        .holland-navigation {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .holland-results {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .holland-type-card {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 16px;
            padding: 1.5rem;
            margin: 1rem 0;
            border: 2px solid transparent;
        }
        
        .holland-type-card.primary {
            background: linear-gradient(135deg, var(--primary), #6366f1);
            color: white;
            border-color: var(--primary);
        }
        
        .holland-type-score {
            font-size: 2rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
        }

        /* Login Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            left: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #64748b;
        }
        
        .close-modal:hover {
            color: #1e293b;
        }

        /* Enhanced Admin Panel Styles */
        .admin-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #f8fafc;
            z-index: 999;
            overflow: hidden;
        }
        
        .admin-panel.active {
            display: flex;
        }
        
        .admin-sidebar {
            width: 280px;
            background: linear-gradient(135deg, var(--dark-bg), #1e293b);
            height: 100vh;
            position: fixed;
            right: 0;
            top: 0;
            padding: 2rem 1rem;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            overflow-y: auto;
            box-shadow: -5px 0 20px rgba(0,0,0,0.1);
        }
        
        .admin-sidebar.active {
            transform: translateX(0);
        }
        
        .admin-content {
            margin-right: 0;
            padding: 2rem;
            transition: margin-right 0.3s ease;
            flex: 1;
            height: 100vh;
            overflow-y: auto;
        }
        
        .admin-content.with-sidebar {
            margin-right: 280px;
        }
        
        .admin-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .admin-card:hover {
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--primary), #6366f1);
            color: white;
            padding: 2rem;
            border-radius: 16px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transform: translate(30px, -30px);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(79, 70, 229, 0.3);
        }
        
        .stat-number {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            position: relative;
            z-index: 1;
        }
        
        .stat-label {
            font-size: 1.1rem;
            font-weight: 600;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }
        
        .admin-nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 12px;
            transition: all 0.3s ease;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }
        
        .admin-nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: right 0.5s ease;
        }
        
        .admin-nav-item:hover {
            background: rgba(255,255,255,0.1);
            color: white;
            transform: translateX(-5px);
        }
        
        .admin-nav-item:hover::before {
            right: 100%;
        }
        
        .admin-nav-item.active {
            background: rgba(255,255,255,0.15);
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .admin-nav-item i {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        
        .admin-table th {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            padding: 1rem;
            text-align: right;
            font-weight: 700;
            color: var(--text-dark);
            border-bottom: 2px solid #e2e8f0;
        }
        
        .admin-table td {
            padding: 1rem;
            border-bottom: 1px solid #f1f5f9;
            text-align: right;
        }
        
        .admin-table tbody tr:hover {
            background: #f8fafc;
        }
        
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-align: center;
            display: inline-block;
            min-width: 80px;
        }
        
        .status-active {
            background: #d1fae5;
            color: #065f46;
        }
        
        .status-inactive {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-completed {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), #6366f1);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6ee7b7, #34d399);
            color: var(--text-dark);
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .btn-secondary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(110, 231, 183, 0.3);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .btn-danger:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-dark);
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        
        .search-box {
            position: relative;
            margin-bottom: 2rem;
        }
        
        .search-box input {
            padding-right: 50px;
        }
        
        .search-box i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #64748b;
        }
        
        .filter-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .filter-tab {
            padding: 12px 24px;
            background: none;
            border: none;
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .filter-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 2rem;
        }
        
        .notification-item {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .notification-item:hover {
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .notification-item.unread {
            border-right: 4px solid var(--primary);
            background: linear-gradient(135deg, #fefefe, #f8fafc);
        }
        
        .export-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .quick-action-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .quick-action-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transform: translateY(-5px);
        }
        
        .quick-action-card i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, var(--primary), #6366f1);
            transition: width 0.3s ease;
        }

        /* Add/Edit Modal Styles */
        .admin-modal {
            display: none;
            position: fixed;
            z-index: 1002;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }
        
        .admin-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .admin-modal-content {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .admin-sidebar {
                width: 100%;
                transform: translateX(100%);
            }
            
            .admin-content.with-sidebar {
                margin-right: 0;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .admin-card {
                padding: 1.5rem;
            }
            
            .admin-table {
                font-size: 0.9rem;
            }
            
            .admin-table th,
            .admin-table td {
                padding: 0.8rem;
            }
            
            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .holland-container {
                padding: 1rem;
            }
            
            .holland-question-card {
                padding: 1.5rem;
            }
        }

        /* Original styles continue here... */
        #mobile-menu {
            transition: opacity 0.3s ease-in-out;
        }
        
        #mobile-menu.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        body.overflow-hidden {
            overflow: hidden;
        }
        
        .highlight-accent {
            background-image: linear-gradient(120deg, var(--secondary) 0%, #a7f3d0 100%);
            background-repeat: no-repeat;
            background-size: 100% 30%;
            background-position: 0 88%;
            transition: background-size 0.25s ease-in;
        }
        
        .highlight-accent:hover {
            background-size: 100% 88%;
        }
        
        .reveal {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .reveal.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .tab-button {
            position: relative;
            transition: color 0.3s ease;
        }
        
        .tab-button::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 3px;
            background-color: var(--primary);
            transition: width 0.3s ease;
        }
        
        .tab-button.active {
            color: var(--primary);
            font-weight: 700;
        }
        
        .tab-button.active::after {
            width: 70%;
        }
        
        .tab-content { 
            display: none; 
        }
        
        .tab-content.active { 
            display: flex; 
        }
        
        .testimonial-stack { 
            position: relative; 
            width: 100%; 
            min-height: 250px; 
        }
        
        .testimonial-card {
            position: absolute; 
            width: 100%; 
            padding: 1.5rem; 
            border-radius: 1.5rem; 
            background: white;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
            transition: transform 0.5s ease, opacity 0.5s ease, z-index 0s;
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            text-align: center;
        }
        
        .testimonial-card.active { 
            z-index: 10; 
            transform: translateY(0) scale(1); 
            opacity: 1; 
            transition-delay: 0.2s; 
        }
        
        .testimonial-card.prev { 
            z-index: 9; 
            transform: translateX(30px) scale(0.95); 
            opacity: 0.5; 
        }
        
        .testimonial-card.next { 
            z-index: 8; 
            transform: translateX(-30px) scale(0.95); 
            opacity: 0.5; 
        }
        
        .testimonial-card.hidden-card { 
            transform: scale(0.85); 
            opacity: 0; 
            z-index: 7; 
        }
        
        .testimonial-avatar {
            width: 40px; 
            height: 40px; 
            border-radius: 9999px; 
            background-color: #334155; 
            color: white;
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: bold;
            position: absolute; 
            bottom: -20px; 
            left: 50%; 
            transform: translateX(-50%); 
            border: 4px solid white;
        }
        
        .testimonial-card-gradient { 
            background: linear-gradient(135deg, #e0e7ff, #c7d2fe); 
        }
        
        .section-title { 
            font-size: 2rem; 
            line-height: 2.25rem; 
            font-weight: 900; 
        }
        
        @media (min-width: 768px) {
            .section-title { 
                font-size: 3rem; 
                line-height: 1; 
            }
        }

        /* Enhanced Mobile Package Styles */
        .mobile-package-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .mobile-package-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .mobile-package-card.featured {
            background: linear-gradient(135deg, #1e1b4b 0%, #4f46e5 100%);
            color: white;
            transform: scale(1.05);
        }
        
        .mobile-package-card.featured::before {
            content: 'الأكثر طلباً';
            position: absolute;
            top: 15px;
            right: -30px;
            background: linear-gradient(45deg, #6ee7b7, #34d399);
            color: #1e1b4b;
            padding: 5px 40px;
            font-size: 12px;
            font-weight: bold;
            transform: rotate(45deg);
        }
        
        .mobile-package-price {
            font-size: 2.5rem;
            font-weight: 900;
            line-height: 1;
        }
        
        .mobile-package-feature {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .mobile-package-feature:last-child {
            border-bottom: none;
        }
        
        .mobile-package-feature svg {
            width: 20px;
            height: 20px;
            color: #6ee7b7;
            flex-shrink: 0;
        }
        
        .mobile-package-button {
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        
        .mobile-package-button:hover {
            transform: translateY(-2px);
        }
        
        .mobile-package-button.primary {
            background: linear-gradient(135deg, #4f46e5, #6366f1);
            color: white;
        }
        
        .mobile-package-button.secondary {
            background: linear-gradient(135deg, #6ee7b7, #34d399);
            color: #1e1b4b;
        }

        /* Continue with all other original styles... */
        .mobile-detailed-view {
            padding: 20px;
        }
        
        .mobile-package-selector {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .mobile-package-selector:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        
        .mobile-package-selector.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, #eef2ff, #e0e7ff);
            transform: scale(1.02);
        }
        
        .mobile-mentor-card {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .mobile-mentor-card:hover {
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }
        
        .mobile-mentor-header {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }
        
        .mobile-mentor-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #e2e8f0;
        }
        
        .mobile-mentor-info h4 {
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 4px;
        }
        
        .mobile-mentor-info p {
            font-size: 14px;
            color: #64748b;
        }
        
        .mobile-mentor-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, padding 0.4s ease;
            padding: 0 16px;
        }
        
        .mobile-mentor-card.open .mobile-mentor-body {
            max-height: 200px;
            padding: 16px;
        }
        
        .mobile-mentor-card.open .arrow-icon {
            transform: rotate(180deg);
        }
        
        .arrow-icon {
            transition: transform 0.3s ease;
            width: 20px;
            height: 20px;
            color: #64748b;
        }
        
        .mobile-sticky-header {
            position: sticky;
            top: 0;
            z-index: 40;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0,0,0,0.1);
            padding: 16px 20px;
        }
        
        .mobile-back-button {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--primary);
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .mobile-back-button:hover {
            transform: translateX(5px);
        }
        
        .mobile-video-container {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 24px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .mobile-video-container iframe {
            width: 100%;
            height: 200px;
            border: none;
        }
        
        .mobile-package-details {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }
        
        .mobile-package-details h2 {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 16px;
        }
        
        .mobile-package-details .price-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 16px;
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 12px;
        }
        
        .mobile-package-details .price-section .price {
            font-size: 2rem;
            font-weight: 900;
            color: var(--primary);
        }
        
        .mobile-package-details .description {
            color: #64748b;
            line-height: 1.6;
            margin-bottom: 24px;
        }
        
        .mobile-service-list {
            margin-bottom: 24px;
        }
        
        .mobile-service-list h3 {
            font-size: 1.125rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 12px;
            padding: 8px 16px;
            background: linear-gradient(135deg, #eef2ff, #e0e7ff);
            border-radius: 20px;
            display: inline-block;
        }
        
        .mobile-service-list ul {
            list-style: none;
            padding: 0;
        }
        
        .mobile-service-list li {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .mobile-service-list li:last-child {
            border-bottom: none;
        }
        
        .mobile-service-list li::before {
            content: '✓';
            color: #6ee7b7;
            font-weight: bold;
            font-size: 18px;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(110, 231, 183, 0.2);
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        @media (max-width: 768px) {
            .mobile-package-card {
                margin-bottom: 20px;
            }
            
            .mobile-detailed-view {
                padding: 16px;
            }
            
            .mobile-package-details {
                padding: 20px;
            }
            
            .mobile-package-details h2 {
                font-size: 1.25rem;
            }
            
            .mobile-package-details .price-section .price {
                font-size: 1.75rem;
            }
            
            .mobile-video-container iframe {
                height: 180px;
            }
        }
        
        .view-transition {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
        
        .view-hidden {
            opacity: 0;
            transform: scale(0.98);
            pointer-events: none;
            position: absolute;
            width: 100%;
        }
        
        .view-visible {
            opacity: 1;
            transform: scale(1);
            position: static;
        }
        
        .mentors-gradient-text {
            background: linear-gradient(90deg, #a5b4fc, var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        @media (max-width: 768px) {
            .tab-content { 
                flex-direction: column-reverse; 
                gap: 2rem; 
            }
            
            .holland-grid { 
                grid-template-columns: repeat(2, 1fr); 
                gap: 1rem; 
            }
            
            #packages-grid-view .grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            #packages-detailed-view .grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            #mentors-panel {
                order: 2;
            }
            
            #details-panel {
                order: 1;
            }
            
            #packages-panel {
                order: 3;
            }
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #4f46e5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .btn-gradient {
            background: linear-gradient(135deg, #4f46e5, #6366f1);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(79, 70, 229, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6ee7b7, #34d399);
            color: #1e1b4b;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(110, 231, 183, 0.3);
        }

        /* Purchase Page Styles */
        .purchase-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #f8fafc;
            z-index: 998;
            overflow-y: auto;
        }
        
        .purchase-page.active {
            display: block;
        }
        
        .purchase-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .purchase-header {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .purchase-form {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-dark);
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .payment-method {
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .payment-method:hover {
            border-color: var(--primary);
            background: #f8fafc;
        }
        
        .payment-method.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, #eef2ff, #e0e7ff);
        }

        /* START: Styles for Tree Plan Section (Modal) */
        .tree-plan-page { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%); 
            z-index: 1005; /* Higher z-index */ 
            overflow-y: auto; 
        }
        
        .tree-plan-page.active { 
            display: block; 
            animation: fadeIn 0.3s ease-out; 
        }
        
        @keyframes fadeIn { 
            from { opacity: 0; } 
            to { opacity: 1; } 
        }
        
        .tree-plan-container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 2rem; 
            min-height: 100vh; 
        }
        
        .tree-plan-header { 
            text-align: center; 
            margin-bottom: 2rem; 
            position: relative; 
        }
        
        .close-tree-plan { 
            position: absolute; 
            top: 0; 
            left: 0; 
            background: white; 
            border: none; 
            border-radius: 50%; 
            width: 50px; 
            height: 50px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
        }
        
        .close-tree-plan:hover { 
            transform: scale(1.1) rotate(90deg); 
        }
        
        .ai-input-section { 
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(10px); 
            border-radius: 24px; 
            padding: 2.5rem; 
            margin-bottom: 3rem; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.1); 
        }
        
        .specialty-input { 
            width: 100%; 
            padding: 1.2rem 1.5rem; 
            border: 2px solid #e2e8f0; 
            border-radius: 16px; 
            font-size: 1.1rem; 
            transition: all 0.3s ease; 
        }
        
        .specialty-input:focus { 
            outline: none; 
            border-color: var(--primary); 
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1); 
        }
        
        .build-plan-button { 
            background: linear-gradient(135deg, var(--primary), #6366f1); 
            color: white; 
            border: none; 
            padding: 1.2rem 2.5rem; 
            border-radius: 16px; 
            font-weight: 700; 
            font-size: 1.1rem; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 8px; 
        }
        
        .build-plan-button:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 10px 25px rgba(79, 70, 229, 0.3); 
        }
        
        .build-plan-button:disabled { 
            background: #9ca3af; 
            cursor: not-allowed; 
            transform: none; 
            box-shadow: none; 
        }
        
        .ai-loading { 
            display: none; 
            text-align: center; 
            padding: 3rem; 
        }
        
        .ai-loading.active { 
            display: block; 
        }
        
        .tree-result-container { 
            opacity: 0; 
            transform: translateY(20px); 
            transition: all 0.5s ease; 
        }
        
        .tree-result-container.visible { 
            opacity: 1; 
            transform: translateY(0); 
        }
        
        .learning-path { 
            display: flex; 
            flex-direction: column; 
            gap: 3rem; 
            max-width: 1200px; 
            margin: 0 auto; 
        }
        
        .path-level { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            position: relative; 
        }
        
        .level-header { 
            background: linear-gradient(135deg, var(--primary), #6366f1); 
            color: white; 
            padding: 1rem 2rem; 
            border-radius: 50px; 
            font-size: 1.25rem; 
            font-weight: 800; 
            margin-bottom: 2rem; 
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3); 
            z-index: 10; 
        }
        
        .courses-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); 
            gap: 1.5rem; 
            width: 100%; 
        }
        
        .course-card { 
            background: white; 
            border-radius: 16px; 
            padding: 1.5rem; 
            box-shadow: 0 8px 25px rgba(0,0,0,0.08); 
            border: 1px solid #e2e8f0; 
            transition: all 0.3s ease; 
            text-decoration: none; 
            color: inherit; 
            display: block; 
        }
        
        .course-card:hover { 
            transform: translateY(-8px); 
            box-shadow: 0 15px 30px rgba(0,0,0,0.12); 
            border-color: var(--primary); 
        }
        
        .course-title { 
            font-size: 1.1rem; 
            font-weight: 700; 
            color: var(--text-dark); 
            margin-bottom: 0.5rem; 
        }
        
        .course-description { 
            font-size: 0.9rem; 
            color: var(--text-light); 
        }
        
        .level-connector { 
            position: absolute; 
            bottom: -1.5rem; 
            left: 50%; 
            transform: translateX(-50%); 
            width: 3px; 
            height: 3rem; 
            background-color: var(--primary-light); 
        }
        
        .path-level:last-child .level-connector { 
            display: none; 
        }
        
        .error-message { 
            background: #fef2f2; 
            border: 1px solid #fecaca; 
            color: #dc2626; 
            padding: 1rem; 
            border-radius: 12px; 
            margin-top: 1rem; 
            text-align: center; 
        }
        
        .error-message pre { 
            background-color: #ffe4e6; 
            padding: 10px; 
            border-radius: 8px; 
            margin-top: 10px; 
            white-space: pre-wrap; 
            word-wrap: break-word; 
            text-align: left; 
            direction: ltr; 
            font-size: 0.8rem;
        }
        /* END: Styles for Tree Plan Section (Modal) */
    </style>
</head>

<body class="min-h-screen overflow-x-hidden">
    <!-- AI Tree Plan Page (Modal) -->
    <div id="treePlanPage" class="tree-plan-page">
        <div class="tree-plan-container">
            <div class="tree-plan-header">
                <button class="close-tree-plan" onclick="closeTreePlan()">
                    <i class="fas fa-times text-xl text-slate-600"></i>
                </button>
                <h1 class="text-4xl md:text-5xl font-black text-primary-dark mb-4">مخطط مسارك التعليمي الذكي</h1>
                <p class="text-lg text-slate-600 max-w-3xl mx-auto">اكتب تخصصك ودع الذكاء الاصطناعي يبحث لك عن أفضل الدورات على الإنترنت.</p>
            </div>

            <div class="ai-input-section">
                <div class="flex flex-col md:flex-row items-center gap-4">
                    <input type="text" id="specialtyInput" class="specialty-input flex-grow" placeholder="مثال: تعلم بايثون، أساسيات التسويق الرقمي...">
                    <button id="buildPlanBtn" class="build-plan-button w-full md:w-auto">
                        <i class="fas fa-magic"></i>
                        <span>ابنِ خطتي</span>
                    </button>
                </div>
            </div>

            <div id="aiLoadingSection" class="ai-loading">
                <div class="loading-spinner" style="width: 50px; height: 50px; border-width: 5px; border-top-color: var(--primary);"></div>
                <p class="text-xl font-bold text-slate-800 mt-4">جاري بناء خطتك... 🤖</p>
                <p class="text-slate-500">قد يستغرق هذا بضع ثوانٍ...</p>
            </div>

            <div id="treeResultContainer" class="tree-result-container"></div>
        </div>
    </div>

    <!-- Holland Assessment Page -->
    <div id="hollandAssessmentPage" class="holland-assessment-page">
        <div class="holland-container">
            <div class="holland-header">
                <button onclick="closeHollandAssessment()" class="mb-4 text-primary hover:text-primary-dark absolute top-4 left-4">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <h1 class="text-3xl md:text-4xl font-bold text-primary-dark mb-4">مقياس هولاند للميول المهنية</h1>
                <p class="text-lg text-slate-600 mb-6">اكتشف شخصيتك المهنية من خلال 60 سؤال</p>
                <div class="holland-progress">
                    <div id="hollandProgressFill" class="holland-progress-fill" style="width: 0%"></div>
                </div>
                <p id="hollandProgressText" class="text-sm text-slate-500">السؤال 1 من 60</p>
            </div>
            
            <div id="hollandQuestionContainer" class="holland-question-card">
                <!-- Questions will be populated here -->
            </div>
            
            <div id="hollandResultsContainer" class="holland-results" style="display: none;">
                <!-- Results will be shown here -->
            </div>
        </div>
    </div>

    <!-- Admin Add/Edit Modals -->
    <div id="addUserModal" class="admin-modal">
        <div class="admin-modal-content">
            <button class="close-modal" onclick="closeAdminModal('addUserModal')">&times;</button>
            <h2 class="text-2xl font-bold mb-6" id="userModalTitle">إضافة مستخدم جديد</h2>
            <form id="addUserForm">
                <input type="hidden" id="editUserId" value="">
                <div class="form-group">
                    <label for="userName">الاسم الكامل</label>
                    <input type="text" id="userName" name="userName" required class="form-control">
                </div>
                <div class="form-group">
                    <label for="userEmail">البريد الإلكتروني</label>
                    <input type="email" id="userEmail" name="userEmail" required class="form-control">
                </div>
                <div class="form-group">
                    <label for="userPhone">رقم الهاتف</label>
                    <input type="tel" id="userPhone" name="userPhone" required class="form-control">
                </div>
                <div class="form-group">
                    <label for="userStatus">الحالة</label>
                    <select id="userStatus" name="userStatus" class="form-control">
                        <option value="active">نشط</option>
                        <option value="inactive">غير نشط</option>
                    </select>
                </div>
                <div class="flex gap-4">
                    <button type="submit" class="btn-primary flex-1" id="userFormSubmitBtn">إضافة المستخدم</button>
                    <button type="button" onclick="closeAdminModal('addUserModal')" class="btn-secondary">إلغاء</button>
                </div>
            </form>
        </div>
    </div>

    <div id="addPackageModal" class="admin-modal">
        <div class="admin-modal-content">
            <button class="close-modal" onclick="closeAdminModal('addPackageModal')">&times;</button>
            <h2 class="text-2xl font-bold mb-6" id="packageModalTitle">إضافة باقة جديدة</h2>
            <form id="addPackageForm">
                <input type="hidden" id="editPackageId" value="">
                <div class="form-group">
                    <label for="packageName">اسم الباقة</label>
                    <input type="text" id="packageName" name="packageName" required class="form-control">
                </div>
                <div class="form-group">
                    <label for="packagePrice">السعر (ريال)</label>
                    <input type="number" id="packagePrice" name="packagePrice" required class="form-control">
                </div>
                <div class="form-group">
                    <label for="packageDescription">الوصف</label>
                    <textarea id="packageDescription" name="packageDescription" rows="3" class="form-control"></textarea>
                </div>
                <div class="form-group">
                    <label for="packageStatus">الحالة</label>
                    <select id="packageStatus" name="packageStatus" class="form-control">
                        <option value="active">نشط</option>
                        <option value="inactive">غير نشط</option>
                    </select>
                </div>
                <div class="flex gap-4">
                    <button type="submit" class="btn-primary flex-1" id="packageFormSubmitBtn">إضافة الباقة</button>
                    <button type="button" onclick="closeAdminModal('addPackageModal')" class="btn-secondary">إلغاء</button>
                </div>
            </form>
        </div>
    </div>

    <div id="addMentorModal" class="admin-modal">
        <div class="admin-modal-content">
            <button class="close-modal" onclick="closeAdminModal('addMentorModal')">&times;</button>
            <h2 class="text-2xl font-bold mb-6" id="mentorModalTitle">إضافة مرشد جديد</h2>
            <form id="addMentorForm">
                <input type="hidden" id="editMentorId" value="">
                <div class="form-group">
                    <label for="mentorName">اسم المرشد</label>
                    <input type="text" id="mentorName" name="mentorName" required class="form-control">
                </div>
                <div class="form-group">
                    <label for="mentorTitle">المسمى الوظيفي</label>
                    <input type="text" id="mentorTitle" name="mentorTitle" required class="form-control">
                </div>
                <div class="form-group">
                    <label for="mentorEmail">البريد الإلكتروني</label>
                    <input type="email" id="mentorEmail" name="mentorEmail" required class="form-control">
                </div>
                <div class="form-group">
                    <label for="mentorExperience">سنوات الخبرة</label>
                    <input type="number" id="mentorExperience" name="mentorExperience" required class="form-control">
                </div>
                <div class="form-group">
                    <label for="mentorSpecialty">التخصص</label>
                    <input type="text" id="mentorSpecialty" name="mentorSpecialty" required class="form-control">
                </div>
                <div class="form-group">
                    <label for="mentorStatus">الحالة</label>
                    <select id="mentorStatus" name="mentorStatus" class="form-control">
                        <option value="active">نشط</option>
                        <option value="inactive">غير نشط</option>
                    </select>
                </div>
                <div class="flex gap-4">
                    <button type="submit" class="btn-primary flex-1" id="mentorFormSubmitBtn">إضافة المرشد</button>
                    <button type="button" onclick="closeAdminModal('addMentorModal')" class="btn-secondary">إلغاء</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Login/Signup Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeLoginModal()">&times;</button>
            
            <!-- Login Form -->
            <div id="login-form-container">
                <h2 class="text-2xl font-bold mb-6 text-center text-slate-800">تسجيل الدخول</h2>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">البريد الإلكتروني</label>
                        <input type="email" id="loginEmail" name="email" required class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">كلمة المرور</label>
                        <input type="password" id="loginPassword" name="password" required class="form-control">
                    </div>
                    <button type="submit" class="btn-gradient w-full">تسجيل الدخول</button>
                    <div class="text-center mt-4">
                        <p class="text-slate-600">ليس لديك حساب؟ <a href="#" id="show-signup" class="text-primary hover:underline font-bold">أنشئ حساباً</a></p>
                    </div>
                </form>
            </div>

            <!-- Signup Form -->
            <div id="signup-form-container" style="display: none;">
                <h2 class="text-2xl font-bold mb-6 text-center text-slate-800">إنشاء حساب جديد</h2>
                <form id="signupForm">
                    <div class="form-group">
                        <label for="signupName">الاسم الكامل</label>
                        <input type="text" id="signupName" required class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="signupEmail">البريد الإلكتروني</label>
                        <input type="email" id="signupEmail" required class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">كلمة المرور</label>
                        <input type="password" id="signupPassword" required class="form-control">
                    </div>
                    <button type="submit" class="btn-gradient w-full">إنشاء حساب</button>
                    <div class="text-center mt-4">
                        <p class="text-slate-600">لديك حساب بالفعل؟ <a href="#" id="show-login" class="text-primary hover:underline font-bold">سجل الدخول</a></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Enhanced Admin Panel -->
    <div id="adminPanel" class="admin-panel">
        <div class="admin-sidebar" id="adminSidebar">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold text-white">لوحة التحكم</h2>
                <p class="text-sm text-gray-300 mt-2">مرحباً بك في نظام مسار</p>
            </div>
            <nav class="space-y-2">
                <a href="#" class="admin-nav-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>الرئيسية</span>
                </a>
                <a href="#" class="admin-nav-item" data-section="users">
                    <i class="fas fa-users"></i>
                    <span>إدارة المستخدمين</span>
                </a>
                <a href="#" class="admin-nav-item" data-section="packages">
                    <i class="fas fa-box"></i>
                    <span>إدارة الباقات</span>
                </a>
                <a href="#" class="admin-nav-item" data-section="mentors">
                    <i class="fas fa-user-tie"></i>
                    <span>إدارة المرشدين</span>
                </a>
                <a href="#" class="admin-nav-item" data-section="orders">
                    <i class="fas fa-shopping-cart"></i>
                    <span>إدارة الطلبات</span>
                </a>
                <a href="#" class="admin-nav-item" data-section="sessions">
                    <i class="fas fa-calendar-alt"></i>
                    <span>إدارة الجلسات</span>
                </a>
                <a href="#" class="admin-nav-item" data-section="content">
                    <i class="fas fa-file-alt"></i>
                    <span>إدارة المحتوى</span>
                </a>
                <a href="#" class="admin-nav-item" data-section="analytics">
                    <i class="fas fa-chart-line"></i>
                    <span>التحليلات</span>
                </a>
                <a href="#" class="admin-nav-item" data-section="financial">
                    <i class="fas fa-dollar-sign"></i>
                    <span>الإدارة المالية</span>
                </a>
                <a href="#" class="admin-nav-item" data-section="reports">
                    <i class="fas fa-file-pdf"></i>
                    <span>التقارير</span>
                </a>
                <a href="#" class="admin-nav-item" data-section="notifications">
                    <i class="fas fa-bell"></i>
                    <span>الإشعارات</span>
                </a>
                <a href="#" class="admin-nav-item" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>الإعدادات</span>
                </a>
            </nav>
            <div class="mt-8 pt-8 border-t border-slate-700">
                <button onclick="logoutAdmin()" class="w-full flex items-center justify-center py-3 px-4 text-white hover:bg-red-500/50 rounded-lg transition-colors">
                    <i class="fas fa-sign-out-alt ml-3"></i>
                    تسجيل الخروج
                </button>
            </div>
        </div>

        <div class="admin-content" id="adminContentContainer">
            <div class="flex items-center justify-between mb-8">
                <h1 id="admin-section-title" class="text-3xl font-bold text-slate-800">الرئيسية</h1>
                <div class="flex items-center gap-4">
                    <button onclick="toggleAdminSidebar()" class="md:hidden bg-primary text-white p-2 rounded-lg">
                        <i class="fas fa-bars"></i>
                    </button>
                    <button onclick="closeAdminPanel()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">
                        إغلاق
                    </button>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div id="admin-dashboard" class="admin-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-users text-4xl mb-4 opacity-20"></i>
                        <div class="stat-number">1,234</div>
                        <div class="stat-label">إجمالي المستخدمين</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #10b981, #059669);">
                        <i class="fas fa-shopping-cart text-4xl mb-4 opacity-20"></i>
                        <div class="stat-number">567</div>
                        <div class="stat-label">الطلبات الجديدة</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                        <i class="fas fa-calendar-check text-4xl mb-4 opacity-20"></i>
                        <div class="stat-number">89</div>
                        <div class="stat-label">الجلسات المكتملة</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
                        <i class="fas fa-user-tie text-4xl mb-4 opacity-20"></i>
                        <div class="stat-number">12</div>
                        <div class="stat-label">المرشدين النشطين</div>
                    </div>
                </div>

                <div class="quick-actions">
                    <div class="quick-action-card" onclick="openAdminModal('addUserModal')">
                        <i class="fas fa-user-plus"></i>
                        <h3 class="font-bold">إضافة مستخدم جديد</h3>
                    </div>
                    <div class="quick-action-card" onclick="openAdminModal('addPackageModal')">
                        <i class="fas fa-plus-circle"></i>
                        <h3 class="font-bold">إضافة باقة جديدة</h3>
                    </div>
                    <div class="quick-action-card" onclick="openAdminModal('addMentorModal')">
                        <i class="fas fa-user-graduate"></i>
                        <h3 class="font-bold">إضافة مرشد جديد</h3>
                    </div>
                    <div class="quick-action-card" onclick="showSection('reports')">
                        <i class="fas fa-download"></i>
                        <h3 class="font-bold">تصدير التقارير</h3>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="admin-card">
                        <h3 class="text-xl font-bold mb-4">الطلبات الأخيرة</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                <div>
                                    <p class="font-semibold">أحمد محمد</p>
                                    <p class="text-sm text-slate-600">باقة الانطلاقة</p>
                                </div>
                                <span class="status-badge status-completed">مكتمل</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                <div>
                                    <p class="font-semibold">فاطمة علي</p>
                                    <p class="text-sm text-slate-600">جلسة استشارية</p>
                                </div>
                                <span class="status-badge status-pending">قيد المعالجة</span>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                <div>
                                    <p class="font-semibold">محمد الأحمد</p>
                                    <p class="text-sm text-slate-600">باقة الخريج</p>
                                </div>
                                <span class="status-badge status-active">نشط</span>
                            </div>
                        </div>
                    </div>

                    <div class="admin-card">
                        <h3 class="text-xl font-bold mb-4">إحصائيات سريعة</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span>معدل الرضا</span>
                                <div class="flex items-center gap-2">
                                    <div class="progress-bar w-20">
                                        <div class="progress-fill" style="width: 98%"></div>
                                    </div>
                                    <span class="font-bold text-green-600">98%</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>متوسط وقت الاستجابة</span>
                                <span class="font-bold text-blue-600">2 ساعة</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>الإيرادات الشهرية</span>
                                <span class="font-bold text-purple-600">45,000 ريال</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>متوسط تقييم الخدمة</span>
                                <div class="flex items-center gap-1">
                                    <span class="font-bold text-yellow-600">4.8</span>
                                    <div class="flex">
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                        <i class="fas fa-star text-yellow-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="admin-card">
                    <h3 class="text-xl font-bold mb-4">الرسم البياني للإيرادات</h3>
                    <div class="chart-container">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Users Management Section -->
            <div id="admin-users" class="admin-section" style="display: none;">
                <div class="admin-card">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold">إدارة المستخدمين</h3>
                        <button class="btn-primary" onclick="openAdminModal('addUserModal')">
                            <i class="fas fa-plus"></i>
                            إضافة مستخدم جديد
                        </button>
                    </div>

                    <div class="search-box">
                        <input type="text" placeholder="البحث عن المستخدمين..." class="form-control">
                        <i class="fas fa-search"></i>
                    </div>

                    <div class="filter-tabs">
                        <button class="filter-tab active">الكل</button>
                        <button class="filter-tab">نشط</button>
                        <button class="filter-tab">غير نشط</button>
                        <button class="filter-tab">محظور</button>
                    </div>

                    <div class="export-buttons">
                        <button class="btn-secondary">
                            <i class="fas fa-file-csv"></i>
                            تصدير CSV
                        </button>
                        <button class="btn-secondary">
                            <i class="fas fa-file-excel"></i>
                            تصدير Excel
                        </button>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="admin-table" id="usersTable">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>الاسم</th>
                                    <th>البريد الإلكتروني</th>
                                    <th>رقم الهاتف</th>
                                    <th>تاريخ التسجيل</th>
                                    <th>الحالة</th>
                                    <th>عدد الطلبات</th>
                                    <th>الإجراءات</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <tr data-id="1">
                                    <td>1</td>
                                    <td>أحمد محمد</td>
                                    <td>ahmed@example.com</td>
                                    <td>0501234567</td>
                                    <td>2024-01-15</td>
                                    <td><span class="status-badge status-active">نشط</span></td>
                                    <td>3</td>
                                    <td>
                                        <button class="btn-secondary" onclick="editUser(this)">تعديل</button>
                                        <button class="btn-danger" onclick="deleteRow(this)">حذف</button>
                                    </td>
                                </tr>
                                <tr data-id="2">
                                    <td>2</td>
                                    <td>فاطمة علي</td>
                                    <td>fatima@example.com</td>
                                    <td>0501234568</td>
                                    <td>2024-01-20</td>
                                    <td><span class="status-badge status-active">نشط</span></td>
                                    <td>1</td>
                                    <td>
                                        <button class="btn-secondary" onclick="editUser(this)">تعديل</button>
                                        <button class="btn-danger" onclick="deleteRow(this)">حذف</button>
                                    </td>
                                </tr>
                                <tr data-id="3">
                                    <td>3</td>
                                    <td>محمد الأحمد</td>
                                    <td>mohamed@example.com</td>
                                    <td>0501234569</td>
                                    <td>2024-01-25</td>
                                    <td><span class="status-badge status-inactive">غير نشط</span></td>
                                    <td>0</td>
                                    <td>
                                        <button class="btn-secondary" onclick="editUser(this)">تعديل</button>
                                        <button class="btn-danger" onclick="deleteRow(this)">حذف</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Packages Management Section -->
            <div id="admin-packages" class="admin-section" style="display: none;">
                <div class="admin-card">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold">إدارة الباقات</h3>
                        <button class="btn-primary" onclick="openAdminModal('addPackageModal')">
                            <i class="fas fa-plus"></i>
                            إضافة باقة جديدة
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="packagesGrid">
                        <div class="border rounded-lg p-6 bg-white shadow-lg" data-id="pkg1">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-bold text-lg">باقة الانطلاقة</h4>
                                <span class="status-badge status-active">نشط</span>
                            </div>
                            <p class="text-slate-600 mb-2">580 ريال</p>
                            <p class="text-sm text-slate-500 mb-4">مثالية لطلاب الثانوية</p>
                            <div class="flex items-center justify-between text-sm text-slate-600 mb-4">
                                <span>عدد الطلبات: 45</span>
                                <span>التقييم: 4.8</span>
                            </div>
                            <div class="flex gap-2">
                                <button class="btn-secondary flex-1" onclick="editPackage(this)">تعديل</button>
                                <button class="btn-danger" onclick="deleteRow(this)">حذف</button>
                            </div>
                        </div>

                        <div class="border rounded-lg p-6 bg-white shadow-lg" data-id="pkg2">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-bold text-lg">جلسة استشارية</h4>
                                <span class="status-badge status-active">نشط</span>
                            </div>
                            <p class="text-slate-600 mb-2">199 ريال</p>
                            <p class="text-sm text-slate-500 mb-4">ساعة تركيز كاملة</p>
                            <div class="flex items-center justify-between text-sm text-slate-600 mb-4">
                                <span>عدد الطلبات: 89</span>
                                <span>التقييم: 4.9</span>
                            </div>
                            <div class="flex gap-2">
                                <button class="btn-secondary flex-1" onclick="editPackage(this)">تعديل</button>
                                <button class="btn-danger" onclick="deleteRow(this)">حذف</button>
                            </div>
                        </div>

                        <div class="border rounded-lg p-6 bg-white shadow-lg" data-id="pkg3">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-bold text-lg">باقة الخريج</h4>
                                <span class="status-badge status-active">نشط</span>
                            </div>
                            <p class="text-slate-600 mb-2">780 ريال</p>
                            <p class="text-sm text-slate-500 mb-4">للانطلاق في سوق العمل</p>
                            <div class="flex items-center justify-between text-sm text-slate-600 mb-4">
                                <span>عدد الطلبات: 32</span>
                                <span>التقييم: 4.7</span>
                            </div>
                            <div class="flex gap-2">
                                <button class="btn-secondary flex-1" onclick="editPackage(this)">تعديل</button>
                                <button class="btn-danger" onclick="deleteRow(this)">حذف</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mentors Management Section -->
            <div id="admin-mentors" class="admin-section" style="display: none;">
                <div class="admin-card">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold">إدارة المرشدين</h3>
                        <button class="btn-primary" onclick="openAdminModal('addMentorModal')">
                            <i class="fas fa-plus"></i>
                            إضافة مرشد جديد
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="mentorsGridAdmin">
                        <div class="border rounded-lg p-6 text-center bg-white shadow-lg" data-id="mentor1">
                            <img src="https://weflawless.co/_next/image?url=%2Fimages%2Fmentors%2FAfnan.jpeg&w=256&q=75" alt="مرشد" class="w-20 h-20 rounded-full mx-auto mb-4 object-cover">
                            <h4 class="font-bold text-lg">أفنان الشهراني</h4>
                            <p class="text-sm text-slate-600 mb-2">مرشدة مهنية</p>
                            <div class="flex items-center justify-center gap-1 mb-2">
                                <span class="text-sm font-bold">4.9</span>
                                <div class="flex">
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                </div>
                            </div>
                            <p class="text-xs text-slate-500 mb-4">عدد الجلسات: 156</p>
                            <span class="status-badge status-active mb-4">نشط</span>
                            <div class="flex gap-2 mt-3 justify-center">
                                <button class="btn-secondary" onclick="editMentor(this)">تعديل</button>
                                <button class="btn-danger" onclick="deleteRow(this)">حذف</button>
                            </div>
                        </div>

                        <div class="border rounded-lg p-6 text-center bg-white shadow-lg" data-id="mentor2">
                            <img src="https://weflawless.co/_next/image?url=%2Fimages%2Fmentors%2FLulu.jpeg&w=256&q=75" alt="مرشد" class="w-20 h-20 rounded-full mx-auto mb-4 object-cover">
                            <h4 class="font-bold text-lg">ابتسام الحربي</h4>
                            <p class="text-sm text-slate-600 mb-2">مستشارة مهنية</p>
                            <div class="flex items-center justify-center gap-1 mb-2">
                                <span class="text-sm font-bold">4.8</span>
                                <div class="flex">
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                </div>
                            </div>
                            <p class="text-xs text-slate-500 mb-4">عدد الجلسات: 98</p>
                            <span class="status-badge status-active mb-4">نشط</span>
                            <div class="flex gap-2 mt-3 justify-center">
                                <button class="btn-secondary" onclick="editMentor(this)">تعديل</button>
                                <button class="btn-danger" onclick="deleteRow(this)">حذف</button>
                            </div>
                        </div>

                        <div class="border rounded-lg p-6 text-center bg-white shadow-lg" data-id="mentor3">
                            <img src="https://firebasestorage.googleapis.com/v0/b/flawless-2022.appspot.com/o/mentors%2F1697095697?alt=media&token=4251025a-4573-4416-a367-a2f099037c86" alt="مرشد" class="w-20 h-20 rounded-full mx-auto mb-4 object-cover">
                            <h4 class="font-bold text-lg">Mohamed Alghamdi</h4>
                            <p class="text-sm text-slate-600 mb-2">مدرب مهني</p>
                            <div class="flex items-center justify-center gap-1 mb-2">
                                <span class="text-sm font-bold">4.7</span>
                                <div class="flex">
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    <i class="fas fa-star text-yellow-400 text-xs"></i>
                                    <i class="fas fa-star text-gray-300 text-xs"></i>
                                </div>
                            </div>
                            <p class="text-xs text-slate-500 mb-4">عدد الجلسات: 73</p>
                            <span class="status-badge status-active mb-4">نشط</span>
                            <div class="flex gap-2 mt-3 justify-center">
                                <button class="btn-secondary" onclick="editMentor(this)">تعديل</button>
                                <button class="btn-danger" onclick="deleteRow(this)">حذف</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Orders Management Section -->
            <div id="admin-orders" class="admin-section" style="display: none;">
                <div class="admin-card">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold">إدارة الطلبات</h3>
                        <div class="flex gap-2">
                            <button class="btn-secondary">
                                <i class="fas fa-file-export"></i>
                                تصدير الطلبات
                            </button>
                        </div>
                    </div>

                    <div class="search-box">
                        <input type="text" placeholder="البحث في الطلبات..." class="form-control">
                        <i class="fas fa-search"></i>
                    </div>

                    <div class="filter-tabs">
                        <button class="filter-tab active">الكل</button>
                        <button class="filter-tab">جديد</button>
                        <button class="filter-tab">قيد المعالجة</button>
                        <button class="filter-tab">مكتمل</button>
                        <button class="filter-tab">ملغي</button>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>رقم الطلب</th>
                                    <th>العميل</th>
                                    <th>الباقة</th>
                                    <th>المرشد</th>
                                    <th>المبلغ</th>
                                    <th>التاريخ</th>
                                    <th>الحالة</th>
                                    <th>الإجراءات</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>#12345</td>
                                    <td>أحمد محمد</td>
                                    <td>باقة الانطلاقة</td>
                                    <td>أفنان الشهراني</td>
                                    <td>580 ريال</td>
                                    <td>2024-01-15</td>
                                    <td><span class="status-badge status-completed">مكتمل</span></td>
                                    <td>
                                        <button class="btn-secondary">عرض</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#12346</td>
                                    <td>فاطمة علي</td>
                                    <td>جلسة استشارية</td>
                                    <td>ابتسام الحربي</td>
                                    <td>199 ريال</td>
                                    <td>2024-01-16</td>
                                    <td><span class="status-badge status-pending">قيد المعالجة</span></td>
                                    <td>
                                        <button class="btn-secondary">عرض</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#12347</td>
                                    <td>محمد الأحمد</td>
                                    <td>باقة الخريج</td>
                                    <td>Mohamed Alghamdi</td>
                                    <td>780 ريال</td>
                                    <td>2024-01-17</td>
                                    <td><span class="status-badge status-active">نشط</span></td>
                                    <td>
                                        <button class="btn-secondary">عرض</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Sessions Management Section -->
            <div id="admin-sessions" class="admin-section" style="display: none;">
                <div class="admin-card">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-bold">إدارة الجلسات</h3>
                        <button class="btn-primary">
                            <i class="fas fa-plus"></i>
                            جدولة جلسة جديدة
                        </button>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2">
                            <div class="admin-card">
                                <h4 class="font-bold mb-4">الجلسات القادمة</h4>
                                <div class="space-y-4">
                                    <div class="border rounded-lg p-4 bg-blue-50">
                                        <div class="flex items-center justify-between mb-2">
                                            <h5 class="font-bold">جلسة استشارية - أحمد محمد</h5>
                                            <span class="text-sm text-blue-600">اليوم 2:00 م</span>
                                        </div>
                                        <p class="text-sm text-slate-600 mb-2">المرشد: أفنان الشهراني</p>
                                        <div class="flex gap-2">
                                            <button class="btn-secondary">تعديل</button>
                                            <button class="btn-primary">بدء الجلسة</button>
                                        </div>
                                    </div>

                                    <div class="border rounded-lg p-4 bg-green-50">
                                        <div class="flex items-center justify-between mb-2">
                                            <h5 class="font-bold">باقة الانطلاقة - فاطمة علي</h5>
                                            <span class="text-sm text-green-600">غداً 10:00 ص</span>
                                        </div>
                                        <p class="text-sm text-slate-600 mb-2">المرشد: ابتسام الحربي</p>
                                        <div class="flex gap-2">
                                            <button class="btn-secondary">تعديل</button>
                                            <button class="btn-primary">جدولة</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="lg:col-span-1">
                            <div class="admin-card">
                                <h4 class="font-bold mb-4">إحصائيات الجلسات</h4>
                                <div class="space-y-4">
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-blue-600">15</div>
                                        <div class="text-sm text-slate-600">جلسات اليوم</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-green-600">89</div>
                                        <div class="text-sm text-slate-600">جلسات هذا الأسبوع</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-2xl font-bold text-purple-600">345</div>
                                        <div class="text-sm text-slate-600">جلسات هذا الشهر</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Management Section -->
            <div id="admin-content" class="admin-section" style="display: none;">
                <div class="admin-card">
                    <h3 class="text-xl font-bold">إدارة المحتوى</h3>
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="admin-analytics" class="admin-section" style="display: none;">
                <div class="admin-card">
                    <h3 class="text-xl font-bold mb-6">التحليلات المتقدمة</h3>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="admin-card">
                            <h4 class="font-bold mb-4">الإيرادات الشهرية</h4>
                            <div class="chart-container">
                                <canvas id="monthlyRevenueChart"></canvas>
                            </div>
                        </div>

                        <div class="admin-card">
                            <h4 class="font-bold mb-4">توزيع الباقات</h4>
                            <div class="chart-container">
                                <canvas id="packagesChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Financial Management Section -->
            <div id="admin-financial" class="admin-section" style="display: none;">
                <div class="admin-card">
                    <h3 class="text-xl font-bold">الإدارة المالية</h3>
                </div>
            </div>

            <!-- Reports Section -->
            <div id="admin-reports" class="admin-section" style="display: none;">
                <div class="admin-card">
                    <h3 class="text-xl font-bold">التقارير</h3>
                </div>
            </div>

            <!-- Notifications Section -->
            <div id="admin-notifications" class="admin-section" style="display: none;">
                <div class="admin-card">
                    <h3 class="text-xl font-bold">الإشعارات</h3>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="admin-settings" class="admin-section" style="display: none;">
                <div class="admin-card">
                    <h3 class="text-xl font-bold">الإعدادات</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- Purchase Page -->
    <div id="purchasePage" class="purchase-page">
        <div class="purchase-container">
            <div class="purchase-header">
                <div class="flex items-center justify-between mb-4">
                    <h1 class="text-2xl font-bold text-slate-800">إتمام الطلب</h1>
                    <button onclick="closePurchasePage()" class="text-slate-500 hover:text-slate-800">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="selectedPackageInfo" class="bg-slate-50 p-4 rounded-lg">
                    <!-- سيتم ملء هذا القسم بمعلومات الباقة المختارة -->
                </div>
            </div>

            <div class="purchase-form">
                <form id="purchaseForm">
                    <h3 class="text-xl font-bold mb-4">معلومات الطلب</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="form-group">
                            <label for="fullName">الاسم الكامل *</label>
                            <input type="text" id="fullName" name="fullName" required class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="phone">رقم الهاتف *</label>
                            <input type="tel" id="phone" name="phone" required class="form-control">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email">البريد الإلكتروني *</label>
                        <input type="email" id="email" name="email" required class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="preferredTime">الوقت المفضل للجلسة</label>
                        <select id="preferredTime" name="preferredTime" class="form-control">
                            <option value="">اختر الوقت المفضل</option>
                            <option value="morning">صباحاً (9 ص - 12 ظ)</option>
                            <option value="afternoon">بعد الظهر (1 ظ - 5 م)</option>
                            <option value="evening">مساءً (6 م - 9 م)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="notes">ملاحظات إضافية</label>
                        <textarea id="notes" name="notes" rows="3" placeholder="أي معلومات إضافية تود مشاركتها..." class="form-control"></textarea>
                    </div>

                    <h3 class="text-xl font-bold mb-4 mt-8">طريقة الدفع</h3>
                    <div class="payment-methods">
                        <div class="payment-method" data-method="visa">
                            <div class="text-2xl mb-2">💳</div>
                            <div class="font-semibold">بطاقة ائتمانية</div>
                            <div class="text-sm text-slate-600">Visa / MasterCard</div>
                        </div>
                        <div class="payment-method" data-method="apple">
                            <div class="text-2xl mb-2">📱</div>
                            <div class="font-semibold">Apple Pay</div>
                            <div class="text-sm text-slate-600">دفع سريع وآمن</div>
                        </div>
                        <div class="payment-method" data-method="stc">
                            <div class="text-2xl mb-2">💰</div>
                            <div class="font-semibold">STC Pay</div>
                            <div class="text-sm text-slate-600">محفظة رقمية</div>
                        </div>
                        <div class="payment-method" data-method="bank">
                            <div class="text-2xl mb-2">🏦</div>
                            <div class="font-semibold">تحويل بنكي</div>
                            <div class="text-sm text-slate-600">تحويل مباشر</div>
                        </div>
                    </div>

                    <div class="flex items-center justify-between mt-8">
                        <div class="text-lg font-bold">
                            المجموع: <span id="totalPrice" class="text-primary">0 ريال</span>
                        </div>
                        <button type="submit" class="btn-gradient text-lg px-8 py-3">
                            تأكيد الطلب والدفع
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="sticky top-0 z-50 w-full bg-white/80 backdrop-blur-xl shadow-sm md:shadow-none md:bg-transparent md:backdrop-blur-none">
        <div class="container mx-auto px-4 sm:px-6">
            <div class="hidden md:block mx-auto mt-5 max-w-5xl">
                <div class="flex items-center justify-between px-4 py-2 bg-white/80 backdrop-blur-xl rounded-full shadow-lg">
                    <a href="#">
                        <span class="text-3xl font-black text-slate-800">مسار<span class="text-indigo-600">.</span></span>
                    </a>
                    <nav class="flex gap-8 items-center font-semibold text-slate-700">
                        <a class="hover:text-indigo-600 transition-colors" href="#services">خدماتنا</a>
                        <a class="hover:text-indigo-600 transition-colors" href="#tree-plan">الخطة الشجرية</a>
                        <a class="hover:text-indigo-600 transition-colors" href="#holland-assessment">مقياس هولاند</a>
                        <a class="hover:text-indigo-600 transition-colors" href="#mentors">مرشدونا</a>
                        <a class="hover:text-indigo-600 transition-colors" href="#packages">الباقات</a>
                        <a class="hover:text-indigo-600 transition-colors" href="#testimonials">قصص النجاح</a>
                    </nav>
                    <div class="flex items-center gap-4">
                        <button onclick="openLoginModal()" class="text-slate-700 hover:text-indigo-600 transition-colors font-semibold">
                            تسجيل الدخول
                        </button>
                        <a href="#packages" class="bg-indigo-600 text-white font-bold py-3 px-6 rounded-full hover:bg-indigo-700 transition-all transform hover:scale-105 shadow-md hover:shadow-lg shadow-indigo-200">
                            احجز جلستك
                        </a>
                    </div>
                </div>
            </div>

            <div class="md:hidden flex items-center justify-between h-20">
                <a href="#">
                    <span class="text-3xl font-black text-slate-800">مسار<span class="text-indigo-600">.</span></span>
                </a>
                <div class="flex items-center gap-4">
                    <button onclick="openLoginModal()" class="text-slate-700 hover:text-indigo-600 transition-colors font-semibold">
                        دخول
                    </button>
                    <button id="hamburger-button" class="z-50 p-2 space-y-1.5">
                        <div class="w-6 h-0.5 bg-slate-800 transition-transform duration-300"></div>
                        <div class="w-6 h-0.5 bg-slate-800 transition-opacity duration-300"></div>
                        <div class="w-6 h-0.5 bg-slate-800 transition-transform duration-300"></div>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden fixed inset-0 z-40 bg-white">
        <nav class="flex flex-col items-center justify-center h-full gap-8 text-2xl font-bold text-slate-800">
            <a class="mobile-nav-link hover:text-indigo-600 transition-colors" href="#services">خدماتنا</a>
            <a class="mobile-nav-link hover:text-indigo-600 transition-colors" href="#tree-plan">الخطة الشجرية</a>
            <a class="mobile-nav-link hover:text-indigo-600 transition-colors" href="#holland-assessment">مقياس هولاند</a>
            <a class="mobile-nav-link hover:text-indigo-600 transition-colors" href="#mentors">مرشدونا</a>
            <a class="mobile-nav-link hover:text-indigo-600 transition-colors" href="#packages">الباقات</a>
            <a class="mobile-nav-link hover:text-indigo-600 transition-colors" href="#testimonials">قصص النجاح</a>
            <a href="#packages" class="mt-4 bg-indigo-600 text-white font-bold py-4 px-8 rounded-xl shadow-lg shadow-indigo-500/30">
                ابدأ رحلتك الآن
            </a>
        </nav>
    </div>

    <main>
        <!-- Hero Section -->
        <section id="hero" class="pt-16 pb-20 md:pt-24 md:pb-28 bg-slate-50">
            <div class="container mx-auto px-6 text-center">
                <div class="reveal">
                    <h1 class="text-4xl md:text-6xl font-black text-primary-dark leading-tight max-w-4xl mx-auto">
                        البوصلة الذكية التي ترسم لك
                        <span class="highlight-accent">مستقبلك المهني</span>
                    </h1>
                    <p class="mt-6 text-base md:text-lg text-text-light max-w-2xl mx-auto">
                        من خلال أدواتنا الذكية وفريقنا من الخبراء، نساعدك على اكتشاف شغفك، اختيار تخصصك، والتخطيط لمسيرة مهنية ناجحة ومُرضية.
                    </p>
                    <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center">
                        <a href="#packages" class="bg-indigo-600 text-white font-bold py-4 px-8 rounded-xl shadow-lg shadow-indigo-500/30 hover:bg-indigo-700 transition-all transform hover:scale-105">
                            ابدأ رحلتك الآن
                        </a>
                        <button onclick="openHollandAssessment()" class="bg-white text-primary-dark font-bold py-4 px-8 rounded-xl shadow-lg hover:shadow-indigo-500/10 transition-all transform hover:scale-105">
                            جرّب مقياس هولاند
                        </button>
                    </div>
                </div>
            </div>
        </section>

      

        <!-- Mentors Section -->
        <section id="mentors" class="py-16 md:py-20">
            <div class="container mx-auto px-6">
                <div class="bg-dark-bg rounded-3xl p-8 md:p-12">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-8 items-center">
                        <div class="md:col-span-1 text-center md:text-right reveal">
                            <h2 class="text-4xl lg:text-5xl font-black leading-tight mentors-gradient-text">مرشدونا<br>المميزون!</h2>
                            <svg class="w-20 h-20 text-secondary mx-auto md:mx-0 mt-4 -mr-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3" />
                            </svg>
                        </div>
                        <div class="md:col-span-3 overflow-hidden reveal">
                            <div class="swiper mentorSwiper">
                                <div id="mentors-grid" class="swiper-wrapper">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Achievements Section -->
        <section id="achievements" class="py-16 md:py-20 bg-white">
            <div class="container mx-auto px-6 text-center">
                <div class="reveal">
                    <h2 class="section-title mb-4">إنجازاتنا بالأرقام..</h2>
                </div>

                <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 text-center reveal">
                    <div class="flex flex-col items-center p-6 bg-slate-50 rounded-2xl shadow-lg">
                        <div class="bg-indigo-100 rounded-full p-4 mb-4">
                            <svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                        </div>
                        <p class="text-4xl md:text-5xl font-black text-primary-dark" data-target="200000">0</p>
                        <p class="mt-2 text-base md:text-lg text-text-light">مستخدم نشط</p>
                    </div>

                    <div class="flex flex-col items-center p-6 bg-slate-50 rounded-2xl shadow-lg">
                        <div class="bg-indigo-100 rounded-full p-4 mb-4">
                            <svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
                        </div>
                        <p class="text-4xl md:text-5xl font-black text-primary-dark" data-target="400">0</p>
                        <p class="mt-2 text-base md:text-lg text-text-light">جلسة إرشادية</p>
                    </div>

                    <div class="flex flex-col items-center p-6 bg-slate-50 rounded-2xl shadow-lg">
                        <div class="bg-indigo-100 rounded-full p-4 mb-4">
                            <svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                        </div>
                        <p class="text-4xl md:text-5xl font-black text-primary-dark" data-target="200">0</p>
                        <p class="mt-2 text-base md:text-lg text-text-light">محتوى تعليمي</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="py-16 md:py-28 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center max-w-3xl mx-auto reveal">
                    <h2 class="section-title">خدمات مصممة لكل مرحلة</h2>
                    <p class="text-text-light mt-4">سواء كنت على مقاعد الدراسة أو في سوق العمل، لدينا ما يناسبك.</p>
                </div>

                <div class="mt-12 reveal">
                    <div class="flex justify-center border-b mb-8 gap-2 md:gap-8">
                        <button class="tab-button text-sm md:text-lg p-3 md:p-4 text-slate-500" data-tab="tab3">للباحثين عن عمل</button>
                        <button class="tab-button text-sm md:text-lg p-3 md:p-4 text-slate-500" data-tab="tab2">لطلاب الجامعة</button>
                        <button class="tab-button text-sm md:text-lg p-3 md:p-4 text-slate-500 active" data-tab="tab1">لطلاب الثانوية</button>
                    </div>

                    <div id="tab1" class="tab-content active items-center gap-8 md:gap-16">
                        <div class="w-full md:w-1/2">
                            <div class="bg-white/60 backdrop-blur-lg p-6 md:p-8 rounded-2xl border border-slate-200 shadow-md">
                                <h3 class="font-black text-xl md:text-2xl mb-6 text-primary-dark">خطوتك الأولى نحو المستقبل</h3>
                                <ul class="space-y-4">
                                    <li class="flex items-start gap-3"><div class="mt-1 flex-shrink-0"><svg class="w-6 h-6 text-secondary" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div><span><span class="font-bold">اكتشف شغفك:</span> نساعدك على استكشاف اهتماماتك ومهاراتك الحقيقية.</span></li>
                                    <li class="flex items-start gap-3"><div class="mt-1 flex-shrink-0"><svg class="w-6 h-6 text-secondary" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div><span><span class="font-bold">اختر تخصصك:</span> نوجهك لاختيار التخصص الجامعي المناسب لك بثقة.</span></li>
                                    <li class="flex items-start gap-3"><div class="mt-1 flex-shrink-0"><svg class="w-6 h-6 text-secondary" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div><span><span class="font-bold">خطط لرحلتك:</span> نضع معك خطة متكاملة لرحلتك الجامعية وما بعدها.</span></li>
                                </ul>
                                <a href="#packages" class="inline-block mt-8 bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors">اكتشف باقات الثانوية</a>
                            </div>
                        </div>
                        <div class="w-full md:w-1/2">
                            <img src="https://i.imgur.com/gBwJ04E.png" alt="طلاب الثانوية" class="w-full h-auto rounded-2xl">
                        </div>
                    </div>

                    <div id="tab2" class="tab-content items-center gap-8 md:gap-16">
                        <div class="w-full md:w-1/2">
                            <div class="bg-white/60 backdrop-blur-lg p-6 md:p-8 rounded-2xl border border-slate-200 shadow-md">
                                <h3 class="font-black text-xl md:text-2xl mb-6 text-primary-dark">من الجامعة إلى سوق العمل</h3>
                                <ul class="space-y-4">
                                    <li class="flex items-start gap-3"><div class="mt-1 flex-shrink-0"><svg class="w-6 h-6 text-secondary" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div><span><span class="font-bold">مسارك الوظيفي:</span> نساعدك في تحديد المسار الوظيفي الأمثل لتخصصك.</span></li>
                                    <li class="flex items-start gap-3"><div class="mt-1 flex-shrink-0"><svg class="w-6 h-6 text-secondary" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div><span><span class="font-bold">سيرة ذاتية قوية:</span> نجهزك لسوق العمل بسيرة ذاتية احترافية ومبهرة.</span></li>
                                    <li class="flex items-start gap-3"><div class="mt-1 flex-shrink-0"><svg class="w-6 h-6 text-secondary" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div><span><span class="font-bold">تدريب للمقابلات:</span> ندربك على المقابلات الوظيفية لتتألق.</span></li>
                                </ul>
                                <a href="#packages" class="inline-block mt-8 bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors">اكتشف باقات الخريجين</a>
                            </div>
                        </div>
                        <div class="w-full md:w-1/2">
                            <img src="https://i.imgur.com/uF0j3j0.png" alt="طلاب الجامعة" class="w-full h-auto rounded-2xl">
                        </div>
                    </div>

                    <div id="tab3" class="tab-content items-center gap-8 md:gap-16">
                        <div class="w-full md:w-1/2">
                            <div class="bg-white/60 backdrop-blur-lg p-6 md:p-8 rounded-2xl border border-slate-200 shadow-md">
                                <h3 class="font-black text-xl md:text-2xl mb-6 text-primary-dark">انطلق في مسارك المهني</h3>
                                <ul class="space-y-4">
                                    <li class="flex items-start gap-3"><div class="mt-1 flex-shrink-0"><svg class="w-6 h-6 text-secondary" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div><span><span class="font-bold">تطوير مهني:</span> نساعدك على تحديد نقاط قوتك ووضع خطة للتطور.</span></li>
                                    <li class="flex items-start gap-3"><div class="mt-1 flex-shrink-0"><svg class="w-6 h-6 text-secondary" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div><span><span class="font-bold">تحسين ملفك:</span> نطور معك سيرتك الذاتية وحسابك على لينكدإن.</span></li>
                                    <li class="flex items-start gap-3"><div class="mt-1 flex-shrink-0"><svg class="w-6 h-6 text-secondary" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></div><span><span class="font-bold">تغيير المسار:</span> نجهزك لاتخاذ خطوة التغيير المهني بثقة ووضوح.</span></li>
                                </ul>
                                <a href="#packages" class="inline-block mt-8 bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition-colors">احجز جلستك الآن</a>
                            </div>
                        </div>
                        <div class="w-full md:w-1/2">
                            <img src="https://i.imgur.com/kS5x8O6.png" alt="الباحثين عن عمل" class="w-full h-auto rounded-2xl">
                        </div>
                    </div>
                </div>
            </div>
        </section>




          <!-- Tree Plan Section -->
        <section id="tree-plan" class="py-16 md:py-28" style="background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);">
            <div class="container mx-auto px-6">
                <div class="text-center max-w-3xl mx-auto reveal">
                    <h2 class="section-title">خطتك التعليمية الذكية</h2>
                    <p class="text-text-light mt-4 text-lg">
                        هل أنت تائه في بحر الدورات على الإنترنت؟ أدخل المجال الذي تريد تعلمه، ودع الذكاء الاصطناعي يرسم لك مسارًا تعليميًا متكاملًا خطوة بخطوة نحو الاحتراف.
                    </p>
                </div>

                <div class="mt-10 text-center reveal">
    <a href="treeplan.html" class="btn-primary text-lg" style="text-decoration: none; display: inline-flex; align-items: center;">
        <i class="fas fa-magic ml-2"></i>
        جرّب الخطة الذكية الآن مجاناً
    </a>
</div>
            </div>
        </section>

        <!-- ENHANCED PACKAGES SECTION -->
        <section id="packages" class="py-16 md:py-28 bg-gradient-to-br from-slate-50 to-indigo-50" style="position: relative;">
            <div class="container mx-auto px-4 sm:px-6">
                <!-- Grid View -->
                <div id="packages-grid-view" class="view-visible view-transition">
                    <div class="text-center max-w-3xl mx-auto mb-12">
                        <h2 class="section-title text-slate-800">باقات إرشادية تناسب احتياجك</h2>
                        <p class="text-text-light mt-4 text-lg">اختر الباقة الأنسب لرحلتك، واحصل على الدعم الذي تستحقه.</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 max-w-6xl mx-auto">
                        <!-- Package 1: Start Package -->
                        <div class="mobile-package-card">
                            <div class="p-6 md:p-8">
                                <div class="flex items-center gap-3 mb-4">
                                    <div class="w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center">
                                        <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="text-xl md:text-2xl font-bold text-slate-800">باقة الانطلاقة</h3>
                                        <p class="text-sm text-slate-500">مثالية لطلاب الثانوية</p>
                                    </div>
                                </div>
                                
                                <div class="mb-6">
                                    <span class="mobile-package-price text-indigo-600">٥٨٠</span>
                                    <span class="text-lg font-medium text-slate-500 mr-2">ريال</span>
                                </div>

                                <div class="space-y-3 mb-8">
                                    <div class="mobile-package-feature">
                                        <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                        <span class="text-slate-700">جلسة استكشافية شاملة</span>
                                    </div>
                                    <div class="mobile-package-feature">
                                        <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                        <span class="text-slate-700">تقرير مفصل للتخصصات</span>
                                    </div>
                                    <div class="mobile-package-feature">
                                        <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                        <span class="text-slate-700">خطة دراسية مخصصة</span>
                                    </div>
                                </div>

                                <button data-package-id="start" class="mobile-package-button primary show-details-button">
                                    اختر واعرض التفاصيل
                                </button>
                            </div>
                        </div>

                        <!-- Package 2: Consultation (Featured) -->
                        <div class="mobile-package-card featured">
                            <div class="p-6 md:p-8">
                                <div class="flex items-center gap-3 mb-4">
                                    <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="text-xl md:text-2xl font-bold text-white">جلسة استشارية</h3>
                                        <p class="text-sm text-white/80">ساعة تركيز كاملة</p>
                                    </div>
                                </div>
                                
                                <div class="mb-6">
                                    <span class="mobile-package-price text-white">١٩٩</span>
                                    <span class="text-lg font-medium text-white/80 mr-2">ريال</span>
                                </div>

                                <div class="space-y-3 mb-8">
                                    <div class="mobile-package-feature">
                                        <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                        <span class="text-white">60 دقيقة تركيز كامل</span>
                                    </div>
                                    <div class="mobile-package-feature">
                                        <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                        <span class="text-white">مراجعة سيرة ذاتية</span>
                                    </div>
                                    <div class="mobile-package-feature">
                                        <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                        <span class="text-white">استشارة فورية</span>
                                    </div>
                                </div>

                                <button data-package-id="consult" class="mobile-package-button secondary show-details-button">
                                    اختر واعرض التفاصيل
                                </button>
                            </div>
                        </div>

                        <!-- Package 3: Graduate Package -->
                        <div class="mobile-package-card">
                            <div class="p-6 md:p-8">
                                <div class="flex items-center gap-3 mb-4">
                                    <div class="w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center">
                                        <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 class="text-xl md:text-2xl font-bold text-slate-800">باقة الخريج</h3>
                                        <p class="text-sm text-slate-500">للانطلاق في سوق العمل</p>
                                    </div>
                                </div>
                                
                                <div class="mb-6">
                                    <span class="mobile-package-price text-indigo-600">٧٨٠</span>
                                    <span class="text-lg font-medium text-slate-500 mr-2">ريال</span>
                                </div>

                                <div class="space-y-3 mb-8">
                                    <div class="mobile-package-feature">
                                        <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                        <span class="text-slate-700">إعداد سيرة ذاتية احترافية</span>
                                    </div>
                                    <div class="mobile-package-feature">
                                        <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                        <span class="text-slate-700">تحضير للمقابلات</span>
                                    </div>
                                    <div class="mobile-package-feature">
                                        <svg fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                        <span class="text-slate-700">تطوير ملف LinkedIn</span>
                                    </div>
                                </div>

                                <button data-package-id="graduate" class="mobile-package-button primary show-details-button">
                                    اختر واعرض التفاصيل
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-12">
                        <p class="text-lg text-slate-600">
                            مش عارف أي باقة تناسبك؟ 
                            <a href="#" class="font-bold text-primary hover:underline">تواصل معنا</a>
                        </p>
                    </div>
                </div>

                <!-- Detailed View -->
                <div id="packages-detailed-view" class="view-hidden view-transition">
                    <!-- Mobile Sticky Header -->
                    <div class="mobile-sticky-header md:hidden">
                        <a href="#" id="mobile-back-button" class="mobile-back-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
                                <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
                            </svg>
                            العودة إلى الباقات
                        </a>
                    </div>

                    <div class="text-center max-w-3xl mx-auto mb-8">
                        <h2 class="section-title text-slate-800">اختر جلستك الإرشادية</h2>
                        <p class="text-text-light mt-4">احصل على المساعدة التي تحتاجها لأخذ حياتك للمستوى التالي!</p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8">
                        <!-- Package Selectors -->
                        <div id="packages-panel" class="lg:col-span-3 order-1">
                            <div class="sticky top-28">
                                <button id="back-to-grid-button" class="hidden md:inline-flex items-center justify-center gap-2 w-full text-center text-primary font-bold mb-4 bg-indigo-100 p-3 rounded-lg hover:bg-indigo-200">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 transform rotate-180">
                                        <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
                                    </svg>
                                    العودة إلى قائمة الجلسات
                                </button>
                                <div id="package-list-container" class="space-y-3"></div>
                            </div>
                        </div>

                        <!-- Package Details -->
                        <div id="details-panel" class="lg:col-span-6 order-2">
                            <div id="package-details-container" class="mobile-package-details"></div>
                        </div>

                        <!-- Mentors Panel -->
                        <div id="mentors-panel" class="lg:col-span-3 order-3">
                            <div class="sticky top-28">
                                <div class="bg-white p-4 lg:p-6 rounded-2xl shadow-lg">
                                    <div class="flex items-center gap-3 mb-4">
                                        <svg class="w-6 h-6 text-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M10 9a3 3 0 100-6 3 3 0 000 6zM6 8a2 2 0 11-4 0 2 2 0 014 0zM1.49 15.326a.78.78 0 01-.358-.442 3 3 0 014.308-3.516 6.484 6.484 0 00-1.905 3.959c-.023.222-.014.442.028.658a.78.78 0 01-.582.651zm15.02 0a.78.78 0 01-.582-.651c.04-.216.05-.436.028-.658a6.484 6.484 0 00-1.905-3.959 3 3 0 014.308 3.516.78.78 0 01-.358.442zM13.5 9a3 3 0 100-6 3 3 0 000 6zM10 15c-1.05 0-2.02-.17-2.9-.469a.75.75 0 00-.362.112l-1.428.857a.75.75 0 00.87.134D8.026 14.82 9.01 15 10 15c.99 0 1.974-.18 2.82-.534a.75.75 0 00.87-.134l-1.428-.857a.75.75 0 00-.362-.112A9.453 9.453 0 0010 15z"></path>
                                        </svg>
                                        <h3 id="mentor-panel-title" class="text-lg font-bold text-slate-800">اختر مرشدك</h3>
                                    </div>
                                    <div id="mentor-list-container" class="space-y-3 max-h-96 overflow-y-auto"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-12 text-center">
                        <p class="text-lg text-slate-600">
                            مش عارف أي باقة تناسبك أو عندك استفسار؟
                            <a href="#" class="font-bold text-primary hover:underline">تواصل معنا</a>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Holland Assessment Section -->
        <section id="holland-assessment" class="py-16 md:py-28 bg-slate-50">
            <div class="container mx-auto px-6">
                <div class="grid md:grid-cols-2 gap-12 md:gap-16 items-center reveal">
                    <div class="text-center md:text-right">
                        <span class="text-sm font-bold text-primary bg-primary-light px-3 py-1 rounded-full">أداة مجانية</span>
                        <h2 class="section-title mt-4">اكتشف شفرتك المهنية</h2>
                        <p class="text-text-light mt-4 text-base md:text-lg">
                            مقياس هولاند هو أداة عالمية تساعدك على تحديد ميولك المهنية. تعرف على شخصيتك، واكتشف التخصصات والوظائف التي تناسبك تمامًا.
                        </p>
                        <div class="mt-8">
                            <button onclick="openHollandAssessment()" class="w-full sm:w-auto bg-indigo-600 text-white font-bold py-4 px-8 rounded-xl shadow-lg shadow-indigo-500/30 hover:bg-indigo-700 transition-all transform hover:scale-105 inline-block">
                                ابدأ المقياس الآن مجانًا
                            </button>
                        </div>
                    </div>

                    <div class="holland-grid grid grid-cols-2 sm:grid-cols-3 gap-3 md:gap-4">
                        <div class="bg-white p-4 text-center rounded-2xl shadow-lg hover:shadow-primary/20 hover:-translate-y-2 transition-all duration-300">
                            <img src="https://weflawless.co/images/Realistic.png" class="w-16 h-16 md:w-20 md:h-20 mx-auto" alt="الواقعي">
                            <h4 class="font-bold mt-3 text-base md:text-lg text-primary-dark">الواقعي (R)</h4>
                            <p class="text-xs text-slate-500 mt-1">يحب العمل العملي.</p>
                        </div>

                        <div class="bg-white p-4 text-center rounded-2xl shadow-lg hover:shadow-primary/20 hover:-translate-y-2 transition-all duration-300">
                            <img src="https://weflawless.co/images/Investigative.png" class="w-16 h-16 md:w-20 md:h-20 mx-auto" alt="المفكر">
                            <h4 class="font-bold mt-3 text-base md:text-lg text-primary-dark">المفكر (I)</h4>
                            <p class="text-xs text-slate-500 mt-1">يستمتع بالتحليل والنظريات.</p>
                        </div>

                        <div class="bg-white p-4 text-center rounded-2xl shadow-lg hover:shadow-primary/20 hover:-translate-y-2 transition-all duration-300">
                            <img src="https://weflawless.co/images/Artistic.png" class="w-16 h-16 md:w-20 md:h-20 mx-auto" alt="الفني">
                            <h4 class="font-bold mt-3 text-base md:text-lg text-primary-dark">الفني (A)</h4>
                            <p class="text-xs text-slate-500 mt-1">مبدع ويحب التعبير.</p>
                        </div>

                        <div class="bg-white p-4 text-center rounded-2xl shadow-lg hover:shadow-primary/20 hover:-translate-y-2 transition-all duration-300">
                            <img src="https://weflawless.co/images/Social.png" class="w-16 h-16 md:w-20 md:h-20 mx-auto" alt="الاجتماعي">
                            <h4 class="font-bold mt-3 text-base md:text-lg text-primary-dark">الاجتماعي (S)</h4>
                            <p class="text-xs text-slate-500 mt-1">يحب مساعدة الآخرين.</p>
                        </div>

                        <div class="bg-white p-4 text-center rounded-2xl shadow-lg hover:shadow-primary/20 hover:-translate-y-2 transition-all duration-300">
                            <img src="https://weflawless.co/images/Enterprising.png" class="w-16 h-16 md:w-20 md:h-20 mx-auto" alt="المقدام">
                            <h4 class="font-bold mt-3 text-base md:text-lg text-primary-dark">المقدام (E)</h4>
                            <p class="text-xs text-slate-500 mt-1">طموح ويحب القيادة.</p>
                        </div>

                        <div class="bg-white p-4 text-center rounded-2xl shadow-lg hover:shadow-primary/20 hover:-translate-y-2 transition-all duration-300">
                            <img src="https://weflawless.co/images/Conventional.png" class="w-16 h-16 md:w-20 md:h-20 mx-auto" alt="التقليدي">
                            <h4 class="font-bold mt-3 text-base md:text-lg text-primary-dark">التقليدي (C)</h4>
                            <p class="text-xs text-slate-500 mt-1">منظم ودقيق.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="py-16 md:py-28 bg-slate-50">
            <div class="container mx-auto px-6">
                <div class="text-center max-w-3xl mx-auto reveal">
                    <h2 class="section-title">قصص نجاح ملهمة</h2>
                    <p class="text-text-light mt-4">آراء وتجارب حقيقية من أشخاص استطاعوا رسم مسارهم بمساعدتنا.</p>
                </div>

                <div class="mt-12 md:mt-16 reveal max-w-2xl mx-auto">
                    <div id="testimonial-stack" class="testimonial-stack">

                    </div>
                    <div class="flex justify-center items-center gap-4 mt-12">
                        <button id="next-testimonial" class="bg-white rounded-full p-3 md:p-4 shadow-md hover:bg-slate-100 transition disabled:opacity-50">
                            <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </button>
                        <div id="testimonial-dots" class="flex gap-2"></div>
                        <button id="prev-testimonial" class="bg-white rounded-full p-3 md:p-4 shadow-md hover:bg-slate-100 transition disabled:opacity-50">
                            <svg class="w-6 h-6 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>



    


        
    <!-- Footer -->
    <footer class="bg-dark-bg py-12 w-full text-white">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="md:col-span-1">
                    <a href="#" class="text-3xl font-black text-white">مسار<span class="text-secondary">.</span></a>
                    <p class="text-slate-400 mt-2">نرسم معك طريق المستقبل.</p>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4 text-slate-200">الشركة</h4>
                    <ul class="space-y-3">
                        <li><a href="#" class="text-slate-400 hover:text-white transition-colors">من نحن</a></li>
                        <li><a href="#" class="text-slate-400 hover:text-white transition-colors">الوظائف</a></li>
                        <li><a href="#" class="text-slate-400 hover:text-white transition-colors">المدونة</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4 text-slate-200">خدماتنا</h4>
                    <ul class="space-y-3">
                        <li><a href="#packages" class="text-slate-400 hover:text-white transition-colors">الجلسات الإرشادية</a></li>
                        <li><a href="#services" class="text-slate-400 hover:text-white transition-colors">الخدمات الطلابية</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4 text-slate-200">الدعم</h4>
                    <ul class="space-y-3">
                        <li><a href="#" class="text-slate-400 hover:text-white transition-colors">تواصل معنا</a></li>
                        <li><a href="#" class="text-slate-400 hover:text-white transition-colors">الأسئلة الشائعة</a></li>
                        <li><a href="#" class="text-slate-400 hover:text-white transition-colors">سياسة الخصوصية</a></li>
                    </ul>
                </div>
            </div>

            <div class="mt-10 border-t border-slate-700 pt-6 text-center text-sm text-slate-400">
                <p>© جميع الحقوق محفوظة لمنصة مسار 2025.</p>
            </div>
        </div>
    </footer>

    <script>


    const API_URL = 'http://localhost:5000/api'; // رابط الخادم الخلفي

    // دالة جديدة لجلب المستخدمين من قاعدة البيانات وعرضهم
    async function fetchAndRenderUsers() {
        try {
            const response = await fetch(`${API_URL}/users`);
            const users = await response.json();
            
            const tbody = document.getElementById('usersTableBody');
            tbody.innerHTML = ''; // مسح الجدول قبل إضافة البيانات الجديدة
            
            users.forEach((user, index) => {
                const newRow = tbody.insertRow();
                newRow.dataset.id = user._id; // استخدام المعرف من قاعدة البيانات
                const status = user.userStatus;
                newRow.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${user.userName}</td>
                    <td>${user.userEmail}</td>
                    <td>${user.userPhone}</td>
                    <td>${new Date(user.createdAt).toLocaleDateString('ar-SA')}</td>
                    <td><span class="status-badge ${status === 'active' ? 'status-active' : 'status-inactive'}">${status === 'active' ? 'نشط' : 'غير نشط'}</span></td>
                    <td>0</td>
                    <td>
                        <button class="btn-secondary" onclick="editUser(this)">تعديل</button>
                        <button class="btn-danger" onclick="deleteUser('${user._id}')">حذف</button>
                    </td>`;
            });
        } catch (error) {
            console.error('Error fetching users:', error);
            showNotification('فشل في جلب بيانات المستخدمين', 'error');
        }
    }

    // تعديل دالة الحذف
    async function deleteUser(userId) {
        if (confirm('هل أنت متأكد من الحذف؟')) {
            try {
                const response = await fetch(`${API_URL}/users/${userId}`, {
                    method: 'DELETE',
                });
                if (!response.ok) throw new Error('فشل الحذف');
                
                document.querySelector(`tr[data-id="${userId}"]`).remove();
                showNotification('تم الحذف بنجاح', 'success');
            } catch (error) {
                console.error('Error deleting user:', error);
                showNotification('فشل حذف المستخدم', 'error');
            }
        }
    }

    // تعديل نموذج إضافة وتعديل المستخدمين
    document.getElementById('addUserForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        const formData = new FormData(this);
        const editId = document.getElementById('editUserId').value;

        const userData = {
            userName: formData.get('userName'),
            userEmail: formData.get('userEmail'),
            userPhone: formData.get('userPhone'),
            userStatus: formData.get('userStatus'),
        };

        const method = editId ? 'PUT' : 'POST';
        const url = editId ? `${API_URL}/users/${editId}` : `${API_URL}/users`;

        try {
            const response = await fetch(url, {
                method: method,
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(userData),
            });

            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.message || 'حدث خطأ ما');
            }

            showNotification(editId ? 'تم تحديث المستخدم بنجاح' : 'تم إضافة المستخدم بنجاح', 'success');
            closeAdminModal('addUserModal');
            fetchAndRenderUsers(); // تحديث الجدول بالبيانات الجديدة
        } catch (error) {
            console.error('Error saving user:', error);
            showNotification(`فشل حفظ المستخدم: ${error.message}`, 'error');
        }
    });

    // عند تحميل الصفحة، قم بجلب البيانات
    document.addEventListener('DOMContentLoaded', function() {
        // ... (كل كود DOMContentLoaded السابق) ...

        // استدعاء الدالة لجلب المستخدمين عند فتح لوحة التحكم
        // يمكنك وضع هذا الاستدعاء داخل دالة openAdminPanel
    });
    
    // تعديل دالة فتح لوحة التحكم لتشمل جلب البيانات
    function openAdminPanel() {
        document.getElementById('adminPanel').classList.add('active');
        setTimeout(() => {
            document.getElementById('adminSidebar').classList.add('active');
            document.getElementById('adminContentContainer').classList.add('with-sidebar');
            initializeCharts();
            fetchAndRenderUsers(); // جلب المستخدمين عند فتح اللوحة
        }, 10);
    }








        // Global Variables
        let currentUser = null;
        let selectedPackage = null;
        let selectedMentor = null;
        
        // Holland Assessment Variables
        let currentQuestionIndex = 0;
        let hollandAnswers = [];
        let hollandQuestions = [];

        // Holland Assessment Functions
        function openHollandAssessment() {
            document.getElementById('hollandAssessmentPage').classList.add('active');
            initializeHollandQuestions();
            showHollandQuestion();
        }

        function closeHollandAssessment() {
            document.getElementById('hollandAssessmentPage').classList.remove('active');
            currentQuestionIndex = 0;
            hollandAnswers = [];
            const resultsContainer = document.getElementById('hollandResultsContainer');
            resultsContainer.style.display = 'none';
            resultsContainer.innerHTML = '';
            document.getElementById('hollandQuestionContainer').style.display = 'block';
        }

        function initializeHollandQuestions() {
            hollandQuestions = [
                // Realistic (R) Questions
                { text: "أستمتع بالعمل بيدي وإصلاح الأشياء", type: "R" }, { text: "أحب العمل في الهواء الطلق", type: "R" }, { text: "أفضل الأعمال العملية على النظرية", type: "R" }, { text: "أجد متعة في استخدام الأدوات والمعدات", type: "R" }, { text: "أحب بناء الأشياء أو تصليحها", type: "R" }, { text: "أستمتع بالعمل مع المواد الملموسة", type: "R" }, { text: "أفضل المهام التي تتطلب مهارات يدوية", type: "R" }, { text: "أحب العمل مع الآلات والمعدات الثقيلة", type: "R" }, { text: "أستمتع بالأعمال التي تتطلب قوة بدنية", type: "R" }, { text: "أحب العمل في البيئات الصناعية", type: "R" },
                // Investigative (I) Questions
                { text: "أحب حل المسائل الرياضية المعقدة", type: "I" }, { text: "أستمتع بالبحث والاستقصاء", type: "I" }, { text: "أحب تحليل البيانات والمعلومات", type: "I" }, { text: "أجد متعة في التجارب العلمية", type: "I" }, { text: "أستمتع بقراءة المجلات العلمية", type: "I" }, { text: "أحب فهم كيفية عمل الأشياء", type: "I" }, { text: "أستمتع بالتفكير النقدي والتحليلي", type: "I" }, { text: "أحب دراسة الظواهر الطبيعية", type: "I" }, { text: "أستمتع بحل الألغاز المعقدة", type: "I" }, { text: "أحب العمل في المختبرات", type: "I" },
                // Artistic (A) Questions
                { text: "أستمتع بالرسم والتصوير", type: "A" }, { text: "أحب الكتابة الإبداعية", type: "A" }, { text: "أستمتع بالموسيقى والغناء", type: "A" }, { text: "أحب التصميم والديكور", type: "A" }, { text: "أستمتع بالتمثيل والمسرح", type: "A" }, { text: "أحب ابتكار أشياء جديدة", type: "A" }, { text: "أستمتع بالتعبير عن مشاعري بطرق فنية", type: "A" }, { text: "أحب العمل في بيئة إبداعية حرة", type: "A" }, { text: "أستمتع بالأعمال اليدوية الفنية", type: "A" }, { text: "أحب حضور المعارض والفعاليات الثقافية", type: "A" },
                // Social (S) Questions
                { text: "أستمتع بمساعدة الآخرين في حل مشاكلهم", type: "S" }, { text: "أحب العمل مع الأطفال", type: "S" }, { text: "أستمتع بالعمل التطوعي", type: "S" }, { text: "أحب تعليم الآخرين مهارات جديدة", type: "S" }, { text: "أستمتع بالاستماع لمشاكل الناس", type: "S" }, { text: "أحب العمل في فريق", type: "S" }, { text: "أستمتع بتقديم المشورة للآخرين", type: "S" }, { text: "أحب مساعدة المرضى أو كبار السن", type: "S" }, { text: "أستمتع بتنظيم الفعاليات الاجتماعية", type: "S" }, { text: "أحب العمل في خدمة المجتمع", type: "S" },
                // Enterprising (E) Questions
                { text: "أحب قيادة الآخرين", type: "E" }, { text: "أستمتع بالتفاوض وإقناع الآخرين", type: "E" }, { text: "أحب تحمل المسؤوليات الكبيرة", type: "E" }, { text: "أستمتع بالمنافسة في العمل", type: "E" }, { text: "أحب اتخاذ القرارات المهمة", type: "E" }, { text: "أستمتع بإدارة المشاريع", type: "E" }, { text: "أحب العمل في مجال المبيعات", type: "E" }, { text: "أستمتع بالعمل في بيئة تنافسية", type: "E" }, { text: "أحب تطوير استراتيجيات العمل", type: "E" }, { text: "أستمتع بالعمل مع أشخاص طموحين", type: "E" },
                // Conventional (C) Questions
                { text: "أحب العمل المنظم والمرتب", type: "C" }, { text: "أستمتع بالعمل مع الأرقام والحسابات", type: "C" }, { text: "أحب اتباع القواعد والإجراءات", type: "C" }, { text: "أستمتع بتنظيم الملفات والوثائق", type: "C" }, { text: "أحب العمل في بيئة مكتبية هادئة", type: "C" }, { text: "أستمتع بالأعمال الإدارية", type: "C" }, { text: "أحب العمل بدقة وانتباه للتفاصيل", type: "C" }, { text: "أستمتع بإدخال البيانات وتحليلها", type: "C" }, { text: "أحب العمل مع جداول البيانات", type: "C" }, { text: "أستمتع بالمهام الروتينية المنتظمة", type: "C" }
            ];
            hollandQuestions = hollandQuestions.sort(() => Math.random() - 0.5);
        }

        function showHollandQuestion() {
            const questionContainer = document.getElementById('hollandQuestionContainer');
            const progressFill = document.getElementById('hollandProgressFill');
            const progressText = document.getElementById('hollandProgressText');
            
            if (currentQuestionIndex >= hollandQuestions.length) {
                showHollandResults();
                return;
            }

            const question = hollandQuestions[currentQuestionIndex];
            const progress = ((currentQuestionIndex + 1) / hollandQuestions.length) * 100;
            
            progressFill.style.width = `${progress}%`;
            progressText.textContent = `السؤال ${currentQuestionIndex + 1} من ${hollandQuestions.length}`;
            
            questionContainer.innerHTML = `
                <div class="holland-question">${question.text}</div>
                <div class="holland-options">
                    <div class="holland-option" data-value="5">أوافق بشدة</div>
                    <div class="holland-option" data-value="4">أوافق</div>
                    <div class="holland-option" data-value="3">محايد</div>
                    <div class="holland-option" data-value="2">لا أوافق</div>
                    <div class="holland-option" data-value="1">لا أوافق بشدة</div>
                </div>
                <div class="holland-navigation">
                    <button onclick="previousHollandQuestion()" class="btn-secondary" ${currentQuestionIndex === 0 ? 'disabled' : ''}>السابق</button>
                    <button id="nextHollandBtn" class="btn-primary" disabled>${currentQuestionIndex === hollandQuestions.length - 1 ? 'عرض النتائج' : 'التالي'}</button>
                </div>
            `;

            const options = questionContainer.querySelectorAll('.holland-option');
            options.forEach(option => {
                option.addEventListener('click', () => {
                    options.forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    hollandAnswers[currentQuestionIndex] = { type: question.type, value: parseInt(option.dataset.value) };
                    document.getElementById('nextHollandBtn').disabled = false;
                });
            });

            document.getElementById('nextHollandBtn').addEventListener('click', nextHollandQuestion);
        }

        function nextHollandQuestion() {
            if (hollandAnswers[currentQuestionIndex]) {
                currentQuestionIndex++;
                showHollandQuestion();
            }
        }

        function previousHollandQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showHollandQuestion();
            }
        }
        
        async function showHollandResults() {
            const questionContainer = document.getElementById('hollandQuestionContainer');
            const resultsContainer = document.getElementById('hollandResultsContainer');
            
            questionContainer.style.display = 'none';
            resultsContainer.style.display = 'block';
            resultsContainer.innerHTML = `
                <div class="ai-loading active">
                    <div class="loading-spinner" style="width: 50px; height: 50px; border-width: 5px; border-top-color: var(--primary);"></div>
                    <p class="text-xl font-bold text-slate-800 mt-4">جاري تحليل شخصيتك... 🤖</p>
                    <p class="text-slate-500">نستخدم الذكاء الاصطناعي لنقدم لك أفضل النتائج.</p>
                </div>`;

            const scores = { 'R': 0, 'I': 0, 'A': 0, 'S': 0, 'E': 0, 'C': 0 };
            hollandAnswers.forEach(answer => { scores[answer.type] += answer.value; });

            const sortedTypes = Object.entries(scores).sort(([, a], [, b]) => b - a).map(([type, score]) => ({ type, score }));
            const typeNames = { 'R': 'الواقعي', 'I': 'المفكر', 'A': 'الفني', 'S': 'الاجتماعي', 'E': 'المقدام', 'C': 'التقليدي' };
            
            const topThreeTypes = sortedTypes.slice(0, 3);
            const hollandCode = topThreeTypes.map(t => t.type).join('');
            const hollandFullName = topThreeTypes.map(t => typeNames[t.type]).join('، ');

            try {
                const GEMINI_API_KEY = await getApiKeyFromServer();
                if (!GEMINI_API_KEY || GEMINI_API_KEY.length < 35) {
                    throw new Error('مفتاح API غير صحيح أو غير مهيأ. يرجى وضع مفتاحك الحقيقي في دالة getApiKeyFromServer.');
                }

                const aiAnalysis = await getAIHollandAnalysis(hollandCode, hollandFullName, GEMINI_API_KEY);

                resultsContainer.innerHTML = `
                    <h2 class="text-3xl font-bold text-primary-dark mb-2">تحليل شخصيتك المهنية</h2>
                    <p class="text-lg font-semibold text-primary mb-6">رمز هولاند الخاص بك: ${hollandCode}</p>
                    <div class="bg-indigo-50 p-6 rounded-2xl mb-8 text-right">
                        <h3 class="text-2xl font-bold text-slate-800 mb-3">${aiAnalysis.title || 'تحليل شخصيتك'}</h3>
                        <p class="text-slate-700 leading-relaxed">${aiAnalysis.description || 'لا يوجد وصف متاح.'}</p>
                    </div>
                    <div class="grid md:grid-cols-2 gap-8 text-right">
                        <div>
                            <h4 class="text-xl font-bold text-slate-800 mb-4">💡 تخصصات جامعية مقترحة</h4>
                            <ul class="space-y-3">${(aiAnalysis.majors || []).map(major => `<li class="flex items-start gap-3"><i class="fas fa-check-circle text-secondary mt-1"></i><span>${major}</span></li>`).join('')}</ul>
                        </div>
                        <div>
                            <h4 class="text-xl font-bold text-slate-800 mb-4">💼 وظائف مقترحة</h4>
                            <ul class="space-y-3">${(aiAnalysis.careers || []).map(career => `<li class="flex items-start gap-3"><i class="fas fa-briefcase text-secondary mt-1"></i><span>${career}</span></li>`).join('')}</ul>
                        </div>
                    </div>
                    <div class="mt-8 text-right">
                        <h4 class="text-xl font-bold text-slate-800 mb-4">🚀 نصائح للنجاح</h4>
                        <ul class="space-y-3">${(aiAnalysis.tips || []).map(tip => `<li class="flex items-start gap-3 bg-slate-50 p-3 rounded-lg"><i class="fas fa-lightbulb text-yellow-500 mt-1"></i><span>${tip}</span></li>`).join('')}</ul>
                    </div>
                    <div class="mt-12 text-center">
                        <p class="text-sm text-slate-500 mb-4">هذا التحليل تم بواسطة الذكاء الاصطناعي وهو للإرشاد فقط.</p>
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <button onclick="closeHollandAssessment()" class="btn-secondary">إعادة الاختبار</button>
                            <a href="#packages" onclick="closeHollandAssessment()" class="btn-primary">ناقش النتائج مع مرشد</a>
                        </div>
                    </div>`;
            } catch (error) {
                console.error('Holland AI Analysis Error:', error);
                resultsContainer.innerHTML = `
                    <div class="error-message mb-4">
                        <p>حدث خطأ أثناء جلب التحليل الذكي: ${error.message}</p>
                        <p>نعرض لك النتائج الأساسية بدلاً من ذلك.</p>
                    </div>
                    <h2 class="text-3xl font-bold text-primary-dark mb-6">نتائج مقياس هولاند</h2>
                    <div class="space-y-4 mb-8">${sortedTypes.map((item, index) => `
                        <div class="holland-type-card ${index === 0 ? 'primary' : ''}">
                            <div class="flex items-center justify-between">
                                <div><h3 class="text-xl font-bold mb-2">${index + 1}. ${typeNames[item.type]}</h3></div>
                                <div class="holland-type-score">${item.score}</div>
                            </div>
                        </div>`).join('')}
                    </div>
                    <div class="text-center space-y-4">
                        <p class="text-lg font-semibold text-slate-700">نوع شخصيتك المهنية الأساسي: <span class="text-primary font-bold">${typeNames[sortedTypes[0].type]}</span></p>
                        <button onclick="closeHollandAssessment()" class="btn-secondary">إغلاق النتائج</button>
                    </div>`;
            }
        }

        async function getAIHollandAnalysis(hollandCode, hollandFullName, apiKey) {
            // This is a mock function. Replace with your actual API call.
            console.log("Simulating AI Analysis for:", hollandCode);
            return new Promise(resolve => setTimeout(() => resolve({
                "title": `المحلل المقدام (${hollandCode})`,
                "description": "أنت شخص يجمع بين الطموح والقدرة على التحليل العميق. تستمتع بقيادة المشاريع المبنية على بيانات وحقائق، وتبرع في إيجاد حلول مبتكرة للمشاكل المعقدة. بيئة العمل المثالية لك هي التي تمنحك الاستقلالية وتكافئ المبادرة.",
                "majors": ["إدارة الأعمال", "تحليل البيانات", "هندسة صناعية", "اقتصاد", "نظم المعلومات الإدارية", "التسويق الرقمي"],
                "careers": ["محلل أعمال", "مدير منتجات", "مستشار إداري", "رائد أعمال في مجال التكنولوجيا", "مدير تسويق", "محلل مالي", "مخطط استراتيجي"],
                "tips": [
                    "استثمر في تطوير مهارات التواصل لديك لتتمكن من عرض أفكارك التحليلية بفعالية.",
                    "ابحث عن أدوار قيادية في المشاريع التي تتطلب دقة بيانات وحل مشكلات.",
                    "لا تخف من المخاطرة المحسوبة بناءً على تحليلاتك."
                ]
            }), 1500));
        }
        
        // Admin Modals
        function openAdminModal(modalId) {
            // Reset forms before opening
            if (modalId === 'addUserModal') {
                document.getElementById('addUserForm').reset();
                document.getElementById('userModalTitle').textContent = 'إضافة مستخدم جديد';
                document.getElementById('userFormSubmitBtn').textContent = 'إضافة المستخدم';
                document.getElementById('editUserId').value = '';
            }
            if (modalId === 'addPackageModal') {
                document.getElementById('addPackageForm').reset();
                document.getElementById('packageModalTitle').textContent = 'إضافة باقة جديدة';
                document.getElementById('packageFormSubmitBtn').textContent = 'إضافة الباقة';
                document.getElementById('editPackageId').value = '';
            }
            if (modalId === 'addMentorModal') {
                document.getElementById('addMentorForm').reset();
                document.getElementById('mentorModalTitle').textContent = 'إضافة مرشد جديد';
                document.getElementById('mentorFormSubmitBtn').textContent = 'إضافة المرشد';
                document.getElementById('editMentorId').value = '';
            }
            document.getElementById(modalId).classList.add('active');
        }

        function closeAdminModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // CRUD Functions
        function editUser(button) {
            const row = button.closest('tr');
            const cells = row.querySelectorAll('td');
            
            document.getElementById('userModalTitle').textContent = 'تعديل بيانات المستخدم';
            document.getElementById('userFormSubmitBtn').textContent = 'حفظ التعديلات';
            document.getElementById('editUserId').value = row.dataset.id;
            
            document.getElementById('userName').value = cells[1].textContent;
            document.getElementById('userEmail').value = cells[2].textContent;
            document.getElementById('userPhone').value = cells[3].textContent;
            const statusText = cells[5].querySelector('.status-badge').textContent;
            document.getElementById('userStatus').value = statusText === 'نشط' ? 'active' : 'inactive';
            
            document.getElementById('addUserModal').classList.add('active');
        }

        function editPackage(button) {
            const card = button.closest('[data-id]');
            
            document.getElementById('packageModalTitle').textContent = 'تعديل بيانات الباقة';
            document.getElementById('packageFormSubmitBtn').textContent = 'حفظ التعديلات';
            document.getElementById('editPackageId').value = card.dataset.id;

            document.getElementById('packageName').value = card.querySelector('h4').textContent;
            document.getElementById('packagePrice').value = parseInt(card.querySelector('p.text-slate-600').textContent);
            document.getElementById('packageDescription').value = card.querySelector('p.text-sm').textContent;
            const statusText = card.querySelector('.status-badge').textContent;
            document.getElementById('packageStatus').value = statusText === 'نشط' ? 'active' : 'inactive';

            document.getElementById('addPackageModal').classList.add('active');
        }

        function editMentor(button) {
            const card = button.closest('[data-id]');
            
            document.getElementById('mentorModalTitle').textContent = 'تعديل بيانات المرشد';
            document.getElementById('mentorFormSubmitBtn').textContent = 'حفظ التعديلات';
            document.getElementById('editMentorId').value = card.dataset.id;

            document.getElementById('mentorName').value = card.querySelector('h4').textContent;
            document.getElementById('mentorTitle').value = card.querySelector('p.text-sm').textContent;
            // You can pre-fill other fields here if they exist in the card
            const statusText = card.querySelector('.status-badge').textContent;
            document.getElementById('mentorStatus').value = statusText === 'نشط' ? 'active' : 'inactive';

            document.getElementById('addMentorModal').classList.add('active');
        }

        function deleteRow(button) {
            if (confirm('هل أنت متأكد من الحذف؟')) {
                button.closest('[data-id]').remove();
                showNotification('تم الحذف بنجاح', 'success');
            }
        }

        // Login & Signup Modal Functions
        function openLoginModal() {
            document.getElementById('loginModal').classList.add('active');
        }

        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
        }

        // Admin Panel Functions
        function openAdminPanel() {
            document.getElementById('adminPanel').classList.add('active');
            setTimeout(() => {
                document.getElementById('adminSidebar').classList.add('active');
                document.getElementById('adminContentContainer').classList.add('with-sidebar');
                initializeCharts();
            }, 10);
        }

        function closeAdminPanel() {
            document.getElementById('adminSidebar').classList.remove('active');
            document.getElementById('adminContentContainer').classList.remove('with-sidebar');
            setTimeout(() => {
                document.getElementById('adminPanel').classList.remove('active');
            }, 300);
        }

        function toggleAdminSidebar() {
            document.getElementById('adminSidebar').classList.toggle('active');
            document.getElementById('adminContentContainer').classList.toggle('with-sidebar');
        }

        function logoutAdmin() {
            closeAdminPanel();
            currentUser = null;
            showNotification('تم تسجيل الخروج بنجاح', 'info');
        }

        function showSection(sectionName) {
            document.querySelectorAll('.admin-section').forEach(section => section.style.display = 'none');
            document.getElementById(`admin-${sectionName}`).style.display = 'block';
            
            document.querySelectorAll('.admin-nav-item').forEach(nav => nav.classList.remove('active'));
            const activeNav = document.querySelector(`[data-section="${sectionName}"]`);
            activeNav.classList.add('active');

            document.getElementById('admin-section-title').textContent = activeNav.querySelector('span').textContent;

            if (window.innerWidth < 768) {
                toggleAdminSidebar();
            }
        }

        // Initialize Charts
        function initializeCharts() {
            const chartIds = ['revenueChart', 'monthlyRevenueChart', 'packagesChart'];
            chartIds.forEach(id => {
                let chart = Chart.getChart(id);
                if (chart) chart.destroy();
            });

            const revenueCtx = document.getElementById('revenueChart')?.getContext('2d');
            if (revenueCtx) {
                new Chart(revenueCtx, {
                    type: 'line',
                    data: { labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو'], datasets: [{ label: 'الإيرادات', data: [12000, 19000, 15000, 25000, 32000, 45000], borderColor: '#4f46e5', backgroundColor: 'rgba(79, 70, 229, 0.1)', tension: 0.4, fill: true }] },
                    options: { responsive: true, maintainAspectRatio: false }
                });
            }

            const monthlyRevenueCtx = document.getElementById('monthlyRevenueChart')?.getContext('2d');
            if (monthlyRevenueCtx) {
                new Chart(monthlyRevenueCtx, {
                    type: 'bar',
                    data: { labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو'], datasets: [{ label: 'الإيرادات الشهرية', data: [45000, 52000, 48000, 61000, 55000, 67000], backgroundColor: 'rgba(79, 70, 229, 0.8)' }] },
                    options: { responsive: true, maintainAspectRatio: false }
                });
            }

            const packagesCtx = document.getElementById('packagesChart')?.getContext('2d');
            if (packagesCtx) {
                new Chart(packagesCtx, {
                    type: 'doughnut',
                    data: { labels: ['باقة الانطلاقة', 'جلسة استشارية', 'باقة الخريج'], datasets: [{ data: [45, 89, 32], backgroundColor: ['#4f46e5', '#10b981', '#f59e0b'] }] },
                    options: { responsive: true, maintainAspectRatio: false }
                });
            }
        }

        // Purchase Page Functions
        function openPurchasePage(packageData) {
            selectedPackage = packageData;
            document.getElementById('purchasePage').classList.add('active');
            
            document.getElementById('selectedPackageInfo').innerHTML = `
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="font-bold text-lg">${packageData.title}</h3>
                        <p class="text-slate-600">مع المرشد: ${selectedMentor.name}</p>
                    </div>
                    <div class="text-left">
                        <p class="text-2xl font-bold text-primary">${packageData.price} ريال</p>
                    </div>
                </div>`;
            
            document.getElementById('totalPrice').textContent = `${packageData.price} ريال`;
        }

        function closePurchasePage() {
            document.getElementById('purchasePage').classList.remove('active');
            selectedPackage = null;
        }

        document.addEventListener("DOMContentLoaded", function() {
            // Mobile Menu Logic
            const hamburgerBtn = document.getElementById('hamburger-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
            const hamburgerDivs = hamburgerBtn.querySelectorAll('div');

            function toggleMenu() {
                const isOpening = mobileMenu.classList.contains('hidden');
                mobileMenu.classList.toggle('hidden');
                document.body.classList.toggle('overflow-hidden', isOpening);
                hamburgerDivs[0].classList.toggle('rotate-45', isOpening);
                hamburgerDivs[0].classList.toggle('translate-y-2', isOpening);
                hamburgerDivs[1].classList.toggle('opacity-0', isOpening);
                hamburgerDivs[2].classList.toggle('-rotate-45', isOpening);
                hamburgerDivs[2].classList.toggle('-translate-y-2.5', isOpening);
            }

            hamburgerBtn.addEventListener('click', toggleMenu);
            mobileNavLinks.forEach(link => link.addEventListener('click', () => {
                if (!mobileMenu.classList.contains('hidden')) toggleMenu();
            }));

            // Login/Signup Form Toggle
            document.getElementById('show-signup').addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('login-form-container').style.display = 'none';
                document.getElementById('signup-form-container').style.display = 'block';
            });
            document.getElementById('show-login').addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('signup-form-container').style.display = 'none';
                document.getElementById('login-form-container').style.display = 'block';
            });

            // Login Form Handler
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;

                if (email === 'admin@massar.com' && password === 'admin123') {
                    currentUser = { email: email, role: 'admin' };
                    closeLoginModal();
                    openAdminPanel();
                    showNotification('مرحباً أيها المدير!', 'success');
                } else {
                    currentUser = { email: email, role: 'user' };
                    closeLoginModal();
                    showNotification('تم تسجيل الدخول بنجاح', 'success');
                }
            });

            // Signup Form Handler
            document.getElementById('signupForm').addEventListener('submit', function(e) {
                e.preventDefault();
                // In a real app, you'd send this to a server
                showNotification('تم إنشاء حسابك بنجاح! يمكنك الآن تسجيل الدخول.', 'success');
                document.getElementById('show-login').click(); // Switch to login form
            });

            // Admin Form Handlers
            document.getElementById('addUserForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const editId = document.getElementById('editUserId').value;

                if (editId) { // Update existing user
                    const row = document.querySelector(`#usersTableBody tr[data-id="${editId}"]`);
                    row.cells[1].textContent = formData.get('userName');
                    row.cells[2].textContent = formData.get('userEmail');
                    row.cells[3].textContent = formData.get('userPhone');
                    const status = formData.get('userStatus');
                    row.cells[5].innerHTML = `<span class="status-badge ${status === 'active' ? 'status-active' : 'status-inactive'}">${status === 'active' ? 'نشط' : 'غير نشط'}</span>`;
                    showNotification('تم تحديث بيانات المستخدم', 'info');
                } else { // Add new user
                    const tbody = document.getElementById('usersTableBody');
                    const newId = 'user' + (tbody.rows.length + 1);
                    const newRow = tbody.insertRow();
                    newRow.dataset.id = newId;
                    const status = formData.get('userStatus');
                    newRow.innerHTML = `
                        <td>${tbody.rows.length}</td>
                        <td>${formData.get('userName')}</td>
                        <td>${formData.get('userEmail')}</td>
                        <td>${formData.get('userPhone')}</td>
                        <td>${new Date().toISOString().split('T')[0]}</td>
                        <td><span class="status-badge ${status === 'active' ? 'status-active' : 'status-inactive'}">${status === 'active' ? 'نشط' : 'غير نشط'}</span></td>
                        <td>0</td>
                        <td>
                            <button class="btn-secondary" onclick="editUser(this)">تعديل</button>
                            <button class="btn-danger" onclick="deleteRow(this)">حذف</button>
                        </td>`;
                    showNotification('تم إضافة المستخدم بنجاح', 'success');
                }
                closeAdminModal('addUserModal');
            });

            document.getElementById('addPackageForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const editId = document.getElementById('editPackageId').value;

                if (editId) { // Update
                    const card = document.querySelector(`#packagesGrid [data-id="${editId}"]`);
                    card.querySelector('h4').textContent = formData.get('packageName');
                    card.querySelector('p.text-slate-600').textContent = `${formData.get('packagePrice')} ريال`;
                    card.querySelector('p.text-sm').textContent = formData.get('packageDescription');
                    const status = formData.get('packageStatus');
                    card.querySelector('.status-badge').outerHTML = `<span class="status-badge ${status === 'active' ? 'status-active' : 'status-inactive'}">${status === 'active' ? 'نشط' : 'غير نشط'}</span>`;
                    showNotification('تم تحديث بيانات الباقة', 'info');
                } else { // Add new
                    const packagesGrid = document.getElementById('packagesGrid');
                    const newId = 'pkg' + (packagesGrid.children.length + 1);
                    const newCard = document.createElement('div');
                    newCard.className = 'border rounded-lg p-6 bg-white shadow-lg';
                    newCard.dataset.id = newId;
                    const status = formData.get('packageStatus');
                    newCard.innerHTML = `
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="font-bold text-lg">${formData.get('packageName')}</h4>
                            <span class="status-badge ${status === 'active' ? 'status-active' : 'status-inactive'}">${status === 'active' ? 'نشط' : 'غير نشط'}</span>
                        </div>
                        <p class="text-slate-600 mb-2">${formData.get('packagePrice')} ريال</p>
                        <p class="text-sm text-slate-500 mb-4">${formData.get('packageDescription')}</p>
                        <div class="flex items-center justify-between text-sm text-slate-600 mb-4">
                            <span>عدد الطلبات: 0</span>
                            <span>التقييم: N/A</span>
                        </div>
                        <div class="flex gap-2">
                            <button class="btn-secondary flex-1" onclick="editPackage(this)">تعديل</button>
                            <button class="btn-danger" onclick="deleteRow(this)">حذف</button>
                        </div>`;
                    packagesGrid.appendChild(newCard);
                    showNotification('تم إضافة الباقة بنجاح', 'success');
                }
                closeAdminModal('addPackageModal');
            });

            document.getElementById('addMentorForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const editId = document.getElementById('editMentorId').value;

                if (editId) { // Update
                    const card = document.querySelector(`#mentorsGridAdmin [data-id="${editId}"]`);
                    card.querySelector('h4').textContent = formData.get('mentorName');
                    card.querySelector('p.text-sm').textContent = formData.get('mentorTitle');
                    const status = formData.get('mentorStatus');
                    card.querySelector('.status-badge').outerHTML = `<span class="status-badge ${status === 'active' ? 'status-active' : 'status-inactive'} mb-4">${status === 'active' ? 'نشط' : 'غير نشط'}</span>`;
                    showNotification('تم تحديث بيانات المرشد', 'info');
                } else { // Add new
                    const mentorsGrid = document.getElementById('mentorsGridAdmin');
                    const newId = 'mentor' + (mentorsGrid.children.length + 1);
                    const newCard = document.createElement('div');
                    newCard.className = 'border rounded-lg p-6 text-center bg-white shadow-lg';
                    newCard.dataset.id = newId;
                    const status = formData.get('mentorStatus');
                    newCard.innerHTML = `
                        <img src="https://placehold.co/80x80/e0e7ff/4338ca?text=${formData.get('mentorName').charAt(0)}" alt="مرشد" class="w-20 h-20 rounded-full mx-auto mb-4 object-cover">
                        <h4 class="font-bold text-lg">${formData.get('mentorName')}</h4>
                        <p class="text-sm text-slate-600 mb-2">${formData.get('mentorTitle')}</p>
                        <p class="text-xs text-slate-500 mb-4">عدد الجلسات: 0</p>
                        <span class="status-badge ${status === 'active' ? 'status-active' : 'status-inactive'} mb-4">${status === 'active' ? 'نشط' : 'غير نشط'}</span>
                        <div class="flex gap-2 mt-3 justify-center">
                            <button class="btn-secondary" onclick="editMentor(this)">تعديل</button>
                            <button class="btn-danger" onclick="deleteRow(this)">حذف</button>
                        </div>`;
                    mentorsGrid.appendChild(newCard);
                    showNotification('تم إضافة المرشد بنجاح', 'success');
                }
                closeAdminModal('addMentorModal');
            });

            // Admin Navigation
            document.querySelectorAll('.admin-nav-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    showSection(this.dataset.section);
                });
            });

            // Purchase Form Handler
            document.getElementById('purchaseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                showNotification('تم إرسال طلبك بنجاح! سيتم التواصل معك قريباً.', 'success');
                closePurchasePage();
            });

            // Payment Method Selection
            document.querySelectorAll('.payment-method').forEach(method => {
                method.addEventListener('click', function() {
                    document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });

            // Reveal on Scroll
            const revealObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('is-visible');
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

            // Animated Counter
            const achievementObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const counters = entry.target.querySelectorAll('[data-target]');
                        counters.forEach(counter => {
                            if (counter.dataset.animated) return;
                            counter.dataset.animated = true;
                            const target = +counter.getAttribute('data-target');
                            let current = 0;
                            const increment = target / 100;
                            const updateCount = () => {
                                if (current < target) {
                                    current += increment;
                                    counter.innerText = Math.ceil(current).toLocaleString('ar-EG');
                                    requestAnimationFrame(updateCount);
                                } else {
                                    counter.innerText = target.toLocaleString('ar-EG');
                                }
                            };
                            updateCount();
                        });
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });
            const achievementsSection = document.getElementById('achievements');
            if (achievementsSection) achievementObserver.observe(achievementsSection);

            // Tabs Logic
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === button.dataset.tab) content.classList.add('active');
                    });
                });
            });

            // Mentors Data and Rendering
            const generalMentors = [
                { name: 'أفنان الشهراني', title: 'مرشدة مهنية حاصلة على شهادة الاعتماد الدولية للتوجيه المهني من CCE.', img: 'https://weflawless.co/_next/image?url=%2Fimages%2Fmentors%2FAfnan.jpeg&w=256&q=75' },
                { name: 'ابتسام الحربي', title: 'مستشارة ومرشدة مهنية معتمدة حاصلة على شهادة CSP لإرشاد الطلاب والمهنيين.', img: 'https://weflawless.co/_next/image?url=%2Fimages%2Fmentors%2FLulu.jpeg&w=256&q=75' },
                { name: 'Mohamed Alghamdi', title: 'مدرب ومرشد مهني معتمد من المنظمتين الامريكية NCDA و CCE.', img: 'https://firebasestorage.googleapis.com/v0/b/flawless-2022.appspot.com/o/mentors%2F1697095697?alt=media&token=4251025a-4573-4416-a367-a2f099037c86' },
                { name: 'نورة الدخيل', title: 'مدربة معتمدة من Global GCF، متخصصة في تطوير السير الذاتية.', img: 'https://weflawless.co/_next/image?url=%2Fimages%2Fmentors%2FNoura.jpeg&w=256&q=75' }
            ];
            const mentorGridEl = document.getElementById('mentors-grid');
            if(mentorGridEl){
                mentorGridEl.innerHTML = generalMentors.map(mentor => `
                    <div class="swiper-slide !w-[280px] md:!w-[320px] h-auto">
                        <div class="bg-slate-800 p-6 rounded-2xl text-center h-full flex flex-col items-center">
                            <img draggable="false" src="${mentor.img}" onerror="this.src='https://placehold.co/128x128/e0e7ff/4338ca?text=${mentor.name.charAt(0)}'" alt="${mentor.name}" class="w-28 h-28 rounded-full mx-auto mb-4 object-cover border-4 border-slate-600">
                            <h4 class="font-bold text-xl text-white">${mentor.name}</h4>
                            <p class="text-slate-400 text-sm mt-2 flex-grow">${mentor.title}</p>
                        </div>
                    </div>`).join('');
                new Swiper('.mentorSwiper', { slidesPerView: 'auto', spaceBetween: 30, grabCursor: true, loop: true, autoplay: { delay: 3000, disableOnInteraction: false, pauseOnMouseEnter: true } });
            }

            // Testimonials Logic
            const testimonials = [
                { quote: "انا مبسوط اني تكلمت مع فريق مسار ومن بعد الله الحمدلله بمجرد كلمة خلوني اخذ القرار الصح، الله يسعدكم يارب.", avatar: "س" },
                { quote: "تجربة فريدة ومميزة! ساعدتني الجلسة في تحديد أهدافي الأكاديمية بوضوح وثقة.", avatar: "أ" },
                { quote: "الآن لدي خطة واضحة لمستقبلي المهني، كل الشكر لمنصة مسار على الدعم والإرشاد المتميز.", avatar: "ن" }
            ];
            const stackContainer = document.getElementById('testimonial-stack');
            const dotsContainer = document.getElementById('testimonial-dots');
            const prevBtn = document.getElementById('prev-testimonial');
            const nextBtn = document.getElementById('next-testimonial');
            let currentIndex = 0;
            let testimonialInterval;

            function renderTestimonials() {
                if (!stackContainer) return;
                stackContainer.innerHTML = '';
                dotsContainer.innerHTML = '';
                testimonials.forEach((t, index) => {
                    const card = document.createElement('div');
                    card.className = 'testimonial-card';
                    card.innerHTML = `<p class="text-lg md:text-xl font-medium text-slate-700">"${t.quote}"</p><div class="testimonial-avatar">${t.avatar}</div>`;
                    stackContainer.appendChild(card);
                    const dot = document.createElement('button');
                    dot.className = 'w-3 h-3 rounded-full transition-all duration-300 bg-slate-300';
                    dot.dataset.index = index;
                    dotsContainer.appendChild(dot);
                });
                updateCardPositions();
            }

            function updateCardPositions() {
                const cards = stackContainer.querySelectorAll('.testimonial-card');
                cards.forEach((card, index) => {
                    card.classList.remove('active', 'prev', 'next', 'hidden-card', 'testimonial-card-gradient');
                    let newIndex = index - currentIndex;
                    if (newIndex < 0) newIndex += testimonials.length;
                    if (newIndex === 0) card.classList.add('active', 'testimonial-card-gradient');
                    else if (newIndex === 1) card.classList.add('next');
                    else if (newIndex === testimonials.length - 1) card.classList.add('prev');
                    else card.classList.add('hidden-card');
                });
                const dots = dotsContainer.querySelectorAll('button');
                dots.forEach(dot => dot.classList.replace('bg-primary', 'bg-slate-300'));
                dots[currentIndex]?.classList.replace('bg-slate-300', 'bg-primary');
            }

            function cycleTestimonials(direction) {
                if (direction === 'next') currentIndex = (currentIndex + 1) % testimonials.length;
                else currentIndex = (currentIndex - 1 + testimonials.length) % testimonials.length;
                updateCardPositions();
            }

            function startAutoplay() { testimonialInterval = setInterval(() => cycleTestimonials('next'), 5000); }
            function stopAutoplay() { clearInterval(testimonialInterval); }

            if(stackContainer){
                renderTestimonials();
                startAutoplay();
                [stackContainer, prevBtn, nextBtn, dotsContainer].forEach(el => {
                    el.addEventListener('mouseenter', stopAutoplay);
                    el.addEventListener('mouseleave', startAutoplay);
                });
                prevBtn.addEventListener('click', () => cycleTestimonials('prev'));
                nextBtn.addEventListener('click', () => cycleTestimonials('next'));
                dotsContainer.addEventListener('click', (e) => {
                    if(e.target.tagName === 'BUTTON') {
                        currentIndex = parseInt(e.target.dataset.index);
                        updateCardPositions();
                    }
                });
            }

            // Enhanced Packages Section Logic
            const mentorsData = {
                'lulu': { name: 'ابتسام الحربي', img: 'https://weflawless.co/_next/image?url=%2Fimages%2Fmentors%2FLulu.jpeg&w=256&q=75', bio: 'مرشدة معتمدة من المنظمة الأمريكية، متخصصة في توجيه الطلاب لاختيار المسار الصحيح.' },
                'mohaned': { name: 'Mohamed Alghamdi', img: 'https://firebasestorage.googleapis.com/v0/b/flawless-2022.appspot.com/o/mentors%2F1697095697?alt=media&token=4251025a-4573-4416-a367-a2f099037c86', bio: 'مرشد مهني معتمد، خبرة 8 سنوات في الإرشاد المهني والتطوير الوظيفي.' },
                'afnan': { name: 'أفنان الشهراني', img: 'https://weflawless.co/_next/image?url=%2Fimages%2Fmentors%2FAfnan.jpeg&w=256&q=75', bio: 'مرشدة مهنية حاصلة على شهادة الاعتماد الدولية، متخصصة في توجيه الطلاب.' },
                'noura': { name: 'نورة الدخيل', img: 'https://weflawless.co/_next/image?url=%2Fimages%2Fmentors%2FNoura.jpeg&w=256&q=75', bio: 'مدربة معتمدة من Global GCF، متخصصة في تطوير السير الذاتية.' }
            };

            const packagesData = {
                'start': { id: 'start', title: 'باقة الانطلاقة', subtitle: 'مثالية لطلاب الثانوية', price: '580', description: 'باقة شاملة مصممة خصيصاً لطلاب الثانوية لمساعدتهم في اكتشاف ميولهم وتحديد مسارهم الجامعي بثقة ووضوح.', video: 'https://www.youtube.com/embed/L_LUpnjgPso', services: ['جلسة استكشافية شاملة (60 دقيقة)', 'تقرير مفصل للتخصصات المناسبة', 'خطة دراسية مخصصة لسنوات الثانوية', 'دليل الجامعات والكليات المناسبة', 'متابعة لمدة شهر كامل عبر WhatsApp'], mentors: ['afnan', 'lulu', 'noura'] },
                'consult': { id: 'consult', title: 'جلسة استشارية', subtitle: 'ساعة تركيز كاملة', price: '199', description: 'جلسة فردية مكثفة مع أحد خبرائنا لحل مشكلة محددة أو الإجابة على استفساراتك المهنية والأكاديمية.', video: 'https://www.youtube.com/embed/L_LUpnjgPso', services: ['60 دقيقة تركيز كامل مع المرشد', 'مراجعة وتحسين السيرة الذاتية', 'استشارة فورية لأي مشكلة مهنية', 'خطة عمل قصيرة المدى', 'تسجيل الجلسة للمراجعة لاحقاً'], mentors: ['mohaned', 'afnan', 'lulu'] },
                'graduate': { id: 'graduate', title: 'باقة الخريج', subtitle: 'للانطلاق في سوق العمل', price: '780', description: 'باقة متكاملة للخريجين الجدد والباحثين عن عمل، تشمل إعداد ملف مهني احترافي والتحضير لدخول سوق العمل بقوة.', video: 'https://www.youtube.com/embed/L_LUpnjgPso', services: ['إعداد سيرة ذاتية احترافية مميزة', 'تطوير ملف LinkedIn متكامل', 'تدريب مكثف على المقابلات الوظيفية', 'استراتيجية البحث عن عمل', 'متابعة لمدة 3 أشهر حتى الحصول على وظيفة'], mentors: ['mohaned', 'noura', 'afnan'] }
            };

            function showPackageDetails(packageId) {
                const gridView = document.getElementById('packages-grid-view');
                const detailedView = document.getElementById('packages-detailed-view');
                gridView.classList.replace('view-visible', 'view-hidden');
                detailedView.classList.replace('view-hidden', 'view-visible');
                renderPackageSelectors(packageId);
                showSelectedPackageDetails(packageId);
                showPackageMentors(packageId);
            }

            function renderPackageSelectors(selectedId = null) {
                const container = document.getElementById('package-list-container');
                if (!container) return;
                container.innerHTML = Object.values(packagesData).map(pkg => `
                    <div class="mobile-package-selector ${pkg.id === selectedId ? 'active' : ''}" data-package-id="${pkg.id}">
                        <div class="flex items-center justify-between">
                            <div><h4 class="font-bold text-lg">${pkg.title}</h4><p class="text-sm text-slate-500">${pkg.subtitle}</p></div>
                            <div class="text-right"><p class="text-xl font-bold text-primary">${pkg.price}</p><p class="text-xs text-slate-500">ريال</p></div>
                        </div>
                    </div>`).join('');
                container.querySelectorAll('.mobile-package-selector').forEach(selector => {
                    selector.addEventListener('click', () => {
                        const packageId = selector.dataset.packageId;
                        container.querySelectorAll('.mobile-package-selector').forEach(s => s.classList.remove('active'));
                        selector.classList.add('active');
                        showSelectedPackageDetails(packageId);
                        showPackageMentors(packageId);
                    });
                });
            }

            function showSelectedPackageDetails(packageId) {
                const pkg = packagesData[packageId];
                if (!pkg) return;
                const container = document.getElementById('package-details-container');
                if (!container) return;
                container.innerHTML = `
                    <div class="mobile-video-container"><iframe src="${pkg.video}" allowfullscreen></iframe></div>
                    <h2>${pkg.title}</h2>
                    <div class="price-section">
                        <div><span class="price">${pkg.price}</span><span class="text-lg font-medium text-slate-500 mr-2">ريال</span></div>
                        <button class="btn-gradient" onclick="proceedToPurchase('${packageId}')">احجز الآن</button>
                    </div>
                    <div class="description">${pkg.description}</div>
                    <div class="mobile-service-list">
                        <h3>ما تحصل عليه في هذه الباقة:</h3>
                        <ul>${pkg.services.map(service => `<li>${service}</li>`).join('')}</ul>
                    </div>`;
            }

            function showPackageMentors(packageId) {
                const pkg = packagesData[packageId];
                if (!pkg) return;
                const container = document.getElementById('mentor-list-container');
                const titleEl = document.getElementById('mentor-panel-title');
                if (!container || !titleEl) return;
                titleEl.textContent = `اختر مرشدك (${pkg.mentors.length} متاح)`;
                container.innerHTML = pkg.mentors.map(mentorId => {
                    const mentor = mentorsData[mentorId];
                    if (!mentor) return '';
                    return `
                        <div class="mobile-mentor-card" data-mentor-id="${mentorId}">
                            <div class="mobile-mentor-header">
                                <img src="${mentor.img}" alt="${mentor.name}" class="mobile-mentor-avatar" onerror="this.src='https://placehold.co/50x50/e0e7ff/4338ca?text=${mentor.name.charAt(0)}'">
                                <div class="mobile-mentor-info flex-grow"><h4>${mentor.name}</h4><p>مرشد معتمد</p></div>
                                <svg class="arrow-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </div>
                            <div class="mobile-mentor-body">
                                <p class="text-sm text-slate-600 mb-4">${mentor.bio}</p>
                                <button class="btn-primary w-full select-mentor-btn" data-mentor-id="${mentorId}">اختر هذا المرشد</button>
                            </div>
                        </div>`;
                }).join('');
                container.querySelectorAll('.mobile-mentor-header').forEach(header => {
                    header.addEventListener('click', () => {
                        const card = header.closest('.mobile-mentor-card');
                        const isOpen = card.classList.contains('open');
                        container.querySelectorAll('.mobile-mentor-card').forEach(c => c.classList.remove('open'));
                        if (!isOpen) card.classList.add('open');
                    });
                });
                container.querySelectorAll('.select-mentor-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const mentorId = btn.dataset.mentorId;
                        selectedMentor = mentorsData[mentorId];
                        container.querySelectorAll('.select-mentor-btn').forEach(b => {
                            b.textContent = 'اختر هذا المرشد';
                            b.classList.replace('btn-secondary', 'btn-primary');
                        });
                        btn.textContent = 'تم الاختيار ✓';
                        btn.classList.replace('btn-primary', 'btn-secondary');
                        showNotification(`تم اختيار المرشد: ${selectedMentor.name}`, 'info');
                    });
                });
            }

            window.proceedToPurchase = function(packageId) {
                if (!selectedMentor) {
                    showNotification('يرجى اختيار مرشد أولاً', 'error');
                    return;
                }
                const packageData = packagesData[packageId];
                openPurchasePage(packageData);
            }

            function backToPackagesGrid() {
                const gridView = document.getElementById('packages-grid-view');
                const detailedView = document.getElementById('packages-detailed-view');
                detailedView.classList.replace('view-visible', 'view-hidden');
                gridView.classList.replace('view-hidden', 'view-visible');
                selectedMentor = null;
            }

            document.querySelectorAll('.show-details-button').forEach(btn => btn.addEventListener('click', () => showPackageDetails(btn.dataset.packageId)));
            document.getElementById('back-to-grid-button')?.addEventListener('click', (e) => { e.preventDefault(); backToPackagesGrid(); });
            document.getElementById('mobile-back-button')?.addEventListener('click', (e) => { e.preventDefault(); backToPackagesGrid(); });

            // Tree Plan Functions
            window.openTreePlan = function() { document.getElementById('treePlanPage').classList.add('active'); };
            window.closeTreePlan = function() {
                document.getElementById('treePlanPage').classList.remove('active');
                document.getElementById('specialtyInput').value = '';
                document.getElementById('treeResultContainer').classList.remove('visible');
                document.getElementById('treeResultContainer').innerHTML = '';
                document.getElementById('aiLoadingSection').classList.remove('active');
            };

            

            async function generateLearningPlan(specialty, apiKey) {
                // This is a mock function. Replace with your actual API call.
                console.log("Simulating AI Plan Generation for:", specialty);
                return new Promise(resolve => setTimeout(() => resolve({
                    "specialty": specialty,
                    "levels": [
                        { "name": "المستوى الأول: الأساسيات", "courses": [ { "title": "مقدمة في " + specialty, "description": "تعلم المبادئ الأساسية والمفاهيم الرئيسية.", "duration": "أسبوعين", "link": "#" }, { "title": "الأدوات الأساسية", "description": "تعرف على الأدوات والبرامج التي ستحتاجها.", "duration": "أسبوع", "link": "#" } ] },
                        { "name": "المستوى الثاني: الممارسة والتطبيق", "courses": [ { "title": "مشروع عملي أول", "description": "طبق ما تعلمته في مشروع حقيقي صغير.", "duration": "شهر", "link": "#" }, { "title": "تقنيات متقدمة", "description": "تعمق في التقنيات الأكثر تعقيداً في المجال.", "duration": "3 أسابيع", "link": "#" } ] },
                        { "name": "المستوى الثالث: الاحتراف", "courses": [ { "title": "بناء ملف أعمال (Portfolio)", "description": "أنشئ مجموعة من المشاريع القوية لعرض مهاراتك.", "duration": "شهرين", "link": "#" }, { "title": "التحضير لسوق العمل", "description": "تعلم كيفية تسويق نفسك والحصول على وظيفة.", "duration": "أسبوعين", "link": "#" } ] }
                    ]
                }), 1500));
            }

            function displayLearningPlan(plan) {
                document.getElementById('aiLoadingSection').classList.remove('active');
                const container = document.getElementById('treeResultContainer');
                container.innerHTML = `
                    <div class="text-center mb-8"><h2 class="text-3xl font-bold text-primary-dark">خطتك التعليمية لـ "${plan.specialty}"</h2></div>
                    <div class="learning-path">${plan.levels.map((level, index) => `
                        <div class="path-level">
                            <div class="level-header">المستوى ${index + 1}: ${level.name}</div>
                            <div class="courses-grid">${level.courses.map(course => `
                                <a href="${course.link}" target="_blank" class="course-card">
                                    <h4 class="course-title">${course.title}</h4>
                                    <p class="course-description">${course.description}</p>
                                    ${course.duration ? `<p class="text-xs text-slate-500 mt-2">المدة: ${course.duration}</p>` : ''}
                                </a>`).join('')}
                            </div>
                            ${index < plan.levels.length - 1 ? '<div class="level-connector"></div>' : ''}
                        </div>`).join('')}
                    </div>
                    <div class="text-center mt-12">
                        <p class="text-sm text-slate-500 mb-4">هذه الخطة تم إنشاؤها بواسطة الذكاء الاصطناعي وهي للإرشاد العام</p>
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <button onclick="closeTreePlan()" class="btn-secondary">إنشاء خطة جديدة</button>
                            <a href="#packages" onclick="closeTreePlan()" class="btn-primary">احصل على مساعدة من مرشد</a>
                        </div>
                    </div>`;
                container.classList.add('visible');
            }

            async function getApiKeyFromServer() {
                // !! تنبيه هام !!
                // يجب استبدال هذا بمفتاح Gemini API الحقيقي الخاص بك
                // لا تترك المفتاح هنا في كود الواجهة الأمامية في بيئة الإنتاج
                // الأفضل هو عمل واجهة خلفية (backend) تقوم بطلب الـ API بأمان
                return 'YOUR_ACTUAL_GEMINI_API_KEY_HERE'; 
            }
        });

        // Utility Functions
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `fixed top-5 right-5 z-[9999] p-4 rounded-lg shadow-lg text-white font-bold animate-pulse ${
                type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500'
            }`;
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => { notification.remove(); }, 3000);
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.active, .admin-modal.active, .purchase-page.active, .holland-assessment-page.active, .tree-plan-page.active').forEach(el => {
                    el.classList.remove('active');
                });
                if (document.getElementById('adminPanel').classList.contains('active')) {
                    closeAdminPanel();
                }
            }
        });


        
    </script>
</body>
</html>